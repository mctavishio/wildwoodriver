<!DOCTYPE html>
<html lang="en">
<head>
	<title>wildwood river</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="wildwood river - a confluence of the arts"/>
	<meta name="keywords" content="poet poetry  books publisher publishing packa mctavish duluth minnesota northern minnesota"/>
	<meta name="author" content="Kathy McTavish">
	<script type='application/ld+json'>
		{
			"@context": "http://www.schema.org",
			"@type": "WebSite",
			"name": "wildwood river press",
			"alternateName": "wildwoodriver",
			"url": "https://www.wildwoodriver.com"
		}
	</script>
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "Organization",
			"name": "Wildwood River Press",
			"url": "https://www.wildwoodriver.com",
			"address": {
				"@type": "PostalAddress",
				"addressLocality": "Duluth",
				"addressRegion": "Minnesota",
				"addressCountry": "USA"
			}
		}
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!--
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-3PZ9ZMVYEG"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-3PZ9ZMVYEG');
	</script>
	-->
	<link rel="stylesheet" href="css/wr.css"/>
</head>
<body id="top" >
<div id="subtextframe" class="frame zlowest"></div>
<div id="svgframe" class="frame zlow"><svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame"></svg></div>
<div id="wordframe" class="frame z0"></div>
<!-- <div id="controlframe" class="frame zhighest"></div> -->
<div id="contentframe" class="absolute zhighest">
<div id="mainflex">
<main id="main" class="expand" data-state="expanded">	

<header>
	<h1>wildwood river press</h1>
</header>
		<p>
			Founded in 2008, Wildwood River Press is a confluence of the arts. This artist-run collaborative creates cross-media exhibitions and live performances. We publish creative work on the web and in print using open-source tools.
		</p>
		<p>
		Our work emerges from contemporary issues, intertextual research, and multi-genre experimentation. Interested in open access and public arts, we explore alternative modes of bookmaking, publishing, and presentation. 
		We employ linear forms such as print books and film and polyphonic forms such as hypertext and multi-channel installation. 
		We examine the intersection between humans and machines (cellos, pencils, looms, computers).
		Our press (our mill) blends wood, wire, resin, pitch, thread, ink,
grammar, syntax, algorithm, text/code to produce sound recordings, film, generative new media, and print books. 
		</p>
		<hr/>
<p><a href="#projects">projects</a></p>
<p><a href="https://store.wildwoodriver.com/">shop for books</a></p>
<p><a href="#" id="soundlink" class="corelink">turn on sound</a> <span class="typewriter small" title="telegraph" id="telegraph"></span></p>
<p><a href="#contact">contact us</a></p>
<hr/>
<article id="projects">
	<header>
		<h1>projects</h1>
	</header>
	<div class="textContent">
		<h5>Book projects by Sheila Packa</h5>
		<p>
		<ul>
		<li><a href="surfacedisplacements/index.html">Surface Displacements</a></li>
		<li><a href="ntrd/index.html">Night Train Red Dust: Poems of the Iron Range</a></li>
		<li><a href="cloudbirds/index.html">Cloud Birds</a></li>
		<li><a href="echolightning/index.html">Echo & Lightning</a></li>
		</ul>
		</p>
		<hr/>
		<h5>Book-like projects by mctavish</h5>
		<p>
		<ul>
		<li><a href="https://www.blueatlas.work/index.html">blue atlas: field notes</a></li>
		<li><a href="https://www.mctavish.io/chance/index.html">chance</a></li>
		<li><a href="https://www.mctavish.io/originofbirds/index.html">origin of birds</a></li>
		<li><a href="https://www.mctavish.io/birdland/index.html">birdland</a></li>
		<li><a href="https://www.mctavish.io/holeinthesky/index.html">night train / blue window (h0le in the skY)</a></li>
		<!--<li><a href="gridfactory/index.html">research: the grid factory: the algorithm mill</a></li>-->
		</ul>
		</p>
		<hr/>
		<h5>Other projects</h5>
		<ul>
		<li><a href="migrations/index.html">Migrations: Poetry & Prose for Life's Transitions</a> (anthology edited by Sheila Packa)</li>
		<li><a href="mmf/index.html">Marrow, Muscle, Flight</a> (by Gary J. Boelhower)</li>
		<li><a href="https://mctavishquilting.com">mctavishquilting.com</a> (online learning website by Val Stoehr, Karen & Kathy McTavish)</li>
		</ul>
		<p>
	</div>
</article>
<hr/>
<article id="contact">
	<header>
		<h1>contact us</h1>
	</header>
	<p><b>Wildwood River Press</b></p>
	<p>
	P.O. Box 3280<br/>
	200 Mount Royal Shopping Center<br/>
	Duluth, MN 55803-2633<br/>
	</p>
	<p><a href="mailto:create@wildwoodriver.com">create@wildwoodriver.com</a></p>
</article>
<!--<audio loop=true id="audio1" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/IVdfd.mp3" type="audio/mpeg">Your browser does not support the audio tag.</audio>-->
<!--
<audio loop=true id="audio1" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/IVdfd.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>-->
<audio loop=true id="audio1">
<source src="https://storage.googleapis.com/www.blueboatfilms.com/sound/starfallremix.mp3" type="audio/mpeg">
</audio>
</main>
</div>
</div>
<div id="hidetext"><a id="hidetextlink" href="#" title="hide text">-</a></div>

</body>
<script src="code/velocity.min.js"></script>
<script src="code/kefir201911.min.js"></script>
<!-- <script src="code/atlasabsence.js"></script> -->
<script>
let width = window.innerWidth, height = window.innerHeight;
let min = Math.min(width, height), max = Math.max(width, height);
let version = (min < 680 || max < 980) ? "small" : "large";
let v = version === "small" ? 0 : 1;
let z = {};
z.tools = {
	randominteger: (min, max) => {
		return Math.floor( min + Math.random()*(max-min));
	},
	logmsg: function(msg) {
		try { 
			console.log("### ::: " + msg); 
		}
		catch(err) { z.tools.logerror(err) }
	},
	logerror: function(error) {
		try { console.log("rusty error ... " + error); }
		catch(err) {}
	},
	randomhighharmonic: () => {
		let multipliers = [10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomlowharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ]/2;
	},
	randomkey: (object) => {
		let keys = Object.keys(object);
		let key = keys[z.tools.randominteger(0,keys.length)];
		// z.tools.logmsg("key = " + key);
		return key;
	},
	datestr: (date, options) => {
		if(options===undefined) options = {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"};
		return date.toLocaleTimeString("en-US", options);
		//new Date().toLocaleTimeString("en-US", {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"});
	},
	togrid: (min=1, max=1, x=1, ndivisions=1) => {
		let dx = Math.floor( (max-min) / ndivisions );
		return Math.floor( ( x-min+dx/2)/dx )*dx + min;
	},
};
//core elements
z.elements = ( () => {
	return {
		body: { el: document.querySelector("body") },
		main: { el: document.querySelector("main") },
		// clock: { el: document.querySelector("#clock") },
		// telegraph: { el: document.querySelector("#telegraph") },
		svg:  { el: document.querySelector("#svg") },
		frames: ["subtextframe", "svgframe", "wordframe", "contentframe"].reduce( (acc, id) => {
			z.tools.logmsg("create frame element ::: " + id);
			acc[id] = { el: document.querySelector("#"+id) };
			return acc;
		}, {}),
	}
})()
	
z.streams = {
	clock: ( () => {
	let dt = 1;
	let date0 = new Date();
	let t0 = Math.floor(date0.getTime()/1000);
	let state0 = { dt: dt, count: 0, date: date0, t: t0, t0: t0 };
	return Kefir.withInterval( dt*1000, emitter => { emitter.emit( { date: new Date() } ) })
			.scan( (state, e) => { 
				state.date = e.date;
				state.t = Math.floor(e.date.getTime()/1000);
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( ),
	dimensions: ( () => {
		let dt = .4;
		const ngrids=[2,2], npasts=[0,0];
		let state0 = { dt: dt, count: 0,
			grid: { nrows: ngrids[v], ncols: ngrids[v], dx: Math.floor(width/ngrids[v]), dy: Math.floor(height/ngrids[v]), sw: 12, pastn: npasts[v] },
			width: width, height: height, 
			max: max, min: min, 
		};
		return Kefir.fromEvents(window, "resize").throttle(dt*1000)
			.scan( (state,e) => {
				state.width = window.innerWidth;
				state.height = window.innerHeight;
				state.max = Math.max(state.width, state.height);
				state.min = Math.min(state.width, state.height);
				state.grid.dx = Math.floor(state.width/state.grid.ncols);
				state.grid.dy = Math.floor(state.height/state.grid.nrows);
				state.grid.sw = Math.floor(Math.max(state.grid.dx*.03, state.grid.dy*.03, 4));
				return state
			}, state0) 
	})( ),
};

z.draw = z => {

let ntimings = 32;
let dtiming = Math.floor(400/ntimings);
const timings = [...Array(ntimings).keys()].reduce( (acc, j) => {
	let duration = 500+(j*dtiming);
	acc[j] = [duration, 900-duration];
return acc;
}, []);

//controls
( () => { 
	//const nextlink = document.querySelector("#nextlink");
	const soundlink = document.querySelector("#soundlink");
	const telegraph = document.querySelector("#telegraph");
	const audio1 = document.querySelector("#audio1");
	const baseurl = "https://storage.googleapis.com/www.blueboatfilms.com/sound/";
	const tracks = [
			// {title: "love meditations", url: "lovemeditationspodcast.mp3", duration: 3980 }, //1:06:24
			// {title: "monks from outer space", url: "monks.mp3", duration: 380}, //6:22
		// 	{title: "ocean | wind | grief", url: "oceanwindgriefpodcast.mp3", duration: 1870},//31:18
		// 	{title: "night train / blue window", url: "nighttrainbluewindow/nighttrainbluewindowpodcast.mp3", duration: 2280}, //38:06
		// 	{title: "origin of birds", url: "originofbirdssound20140330.mp3", duration: 1360},//22:50
		// 	{title: "ahab's dream", url: "ahabsdreampodcast.mp3", duration: 1220},//20:24
		// 	{title: "birdland", url: "birdlandpodcast.mp3", duration: 3780},//1:03:05
		// 	{title: "holy fool", url: "holyfoolpodcast.mp3", duration: 1720},//28:43
		// 	{title: "horse speaks to sky", url: "horsespeakssky.mp3", duration: 420},//7:08
		 	{title: "sophronia soundscape", url: "sophroniasoundscape.mp3", duration: 1746},//29:06
		 	{title: "train", url: "road1a_long.mp3", duration: 67},//3:19
		 	{title: "mill city soundscape", url: "20150503millcityrequiem.mp3", duration: 1986},//33:06
			{title: "starfall", url: "starfallremix.mp3", duration: 481},//8:01
			{title: "rain clouds", url: "dronespace7.mp3", duration:360}, //6:03
			{title: "nyx ::: track #3", url: "nyx3.mp3", duration:200}, //3:20
			{title: "fearful journey", url: "fearfuljourneypodcast.mp3", duration:2209}, //36:49
			{title: "cistern #5", url: "cistern20140630_5_cistern.mp3", duration:1790}, //29:51
			{title: "echo & lightning", url: "echolightningpodcast.mp3", duration:2050}, //34:12
	];
//	let currenttrack = 0;
	let currenttrack = z.tools.randominteger(0,tracks.length);
	let soundplaying = false;
	let track = tracks[currenttrack];
	audio1.src = baseurl + track.url;
	Kefir.fromEvents(soundlink, "click").onValue( e => {
		z.tools.logmsg("play sound !");
		if(!soundplaying) { 
			try {
				currenttrack = (currenttrack+1)%tracks.length;
				let track = tracks[currenttrack];
				audio1.src = baseurl + track.url;
				// let starttime = z.tools.randominteger(0,track.duration);
				let starttime = 0;
				audio1.currentTime = starttime;
				audio1.play();
				z.tools.logmsg("playback resumed");
				telegraph.innerHTML =  "<i>(currently playing ::: " + track.title + ")</i>";
				soundplaying = true;
				soundlink.innerText = "turn off sound/new  track";
				soundlink.classList.add("active");
			} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) } 
		}
		else { 
			try {
				document.querySelector("#audio1").pause();
				telegraph.innerHTML =  "";
				soundplaying = false;
				soundlink.innerText = "turn on sound";
				soundlink.classList.remove("active");
			} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
		}
	});
})();

const playlist = [
	//ny
	["#FFFFFF", "##313331", "#524E4A", "#391F18", "#813B2B", "#A15444", "#354141", "#222222"], //nystairs
	["#332725", "#535051", "#705E5A", "#80807F", "#7A756B", "#80807F", "#E8EDF2", "#785E56", "#47484A"], //nystairs
	["#42433E", "#5C5C58", "#81796C", "#484238", "#5C5042", "#000000", "#1F2C40", "#2B3E57", "#2A3540", "#78766D"], //nystairs
	["#5E646F", "#9BB4C6", "#7F7976", "#4E596E", "#3E3839", "#70625A"], //nystairs (some blue)
	["#786652", "#5B4031", "#1A1E1C", "#B6B7B5", "#9B999C", "#16190D", "#5F3D35", "#71391E"], //nystairs
	["#FBFBFD", "#7B7879", "#575758", "#5D5048", "#7F7066", "#3C3C3C"], //nystairs
	["#977A6D", "#5B5350", "#87847D", "#57646F", "#AFBBC2", "#B6ADA8", "#1B3B51", "#2D2E31", "#546877"], //nystairs (blues)
	["#873E04", "#463730", "#7D838A", "#CE8430", "#732F02", "#4E4340", "#453732", "#A19F9B", "#5B4F44"], //nylibrary browns grays
	["#403B37", "#444242", "#444242", "#2F2824", "#423D3B", "#423D3B", "#8B5D3E", "#3F3E3F", "#2A211A", "#D8D8D8", "#6C727D"], //nylibrary browns grays blues
	["#644C39", "#5B4536", "#B69D88", "#614C3E", "#16100C", "#150F0B", "#120D07"], //ny art haring? all browns dark
	["#662512", "#865E40", "#B9916F", "#B58562", "#965C3D", "#662512", "#53200A", "#432916", "#955C3D", "#4A3321"], //ny art reds browns clay
	["#040302", "#75604F", "#CDBBAB", "#77614A", "#0E0A06", "#BEA794", "#603102", "#93520D", "#A99588", "#A97D51"], //ny art reds browns clay
	["#C09A7A", "#C68425", "#9C1704", "#B38968", "#0D0604", "#967051", "#941102", "#A64A25"], //nyart yellow orange red (vivid color)
	["#A4886E", "#866648", "#5F3B1A", "#452B14", "#79552C", "#896338", "#0D0903", "#AA9179", "#4F3015"], //nyart browns
	["#AE7C41", "#A54B18", "#AC6C35", "#90350F", "#75270D", "#633E1A", "#0A0502", "#A3270C"], //nyart browns red harring
	["#C39B72", "#C29464", "#9A622C", "#864B12", "#823607", "#69350D", "#86480F", "#583D26", "#51270E"], //nyart browns  hesse
	["#676863", "#3E3E3C", "#82796D", "#444037", "#5F5343", "#000000", "#3B5478", "#233047", "#333630", "#413A33", "#343C35", "#20293C", "#4E483E"], //ny street sky blue gray brown
	["#B1B4B0", "#7D7672", "#604A49", "#504343", "#583E3F", "#828F87", "#61605B"], //nystreet (bg brown)
	["#392F28", "#34342E", "#696966", "#5F5B56", "#CDCDCD", "#FFFFFF", "#503D34", "#262420"], //nystreet grays bg brown
	["#2C2F2E", "#505351", "#271814", "#823A2B", "#A15444", "#777673", "#453D34"], //ny stairs grays reds bg orange
	// city
	["#46474A", "#6C665F", "#6C6C6C", "#2C2D25", "#8D9194", "#2C2920", "#57524E", "#5C5D58"], //window mpls warehouse (green gray brown beige)
	["#848482", "#BEAA81", "#88816F", "#9D9892", "#463D2C", "#7F745E", "#30251A", "#3F3626", "#A09C93"], //mpls warehouse window (some yellow)
	["#AFBDD0", "#D7DCE1", "#93A7B8", "#4D585B", "#585151", "#908985", "#848181", "#4D585"], //tiger dancing (blues gray)
	["#D0D0D0", "#FBFBFB", "#999B99", "#91867F", "#5B4939", "#47392B", "#3C5D5C", "#535351", "#586463", "#304142", "#33261D", "#745C4B"], //bridge bgs (bg brown white0)
	["#4B2D13", "#081B30", "#194874", "#0B1C2C", "#0B1C2C", "#101721", "#305F83"], //canada night image w/brown blue dark too vivid?
	["#172F4F", "#2A68A1", "#2B4E6B", "#103354", "#3C6FA4"], //canada night image ll blue dark combine with above?
	["#EFF0F2", "#DAD1C5", "#828075", "#353934", "#0F1214", "#091007", "#47493D", "#393E2F", "#484E42", "#2D372E"], //greens mist railway duluth with white

	//walking film
	["#262626", "#7B8DA6", "#4D688C", "#A4ADBF", "#D7D7D9", "#556C8B", "#828EA6", "#7A889D", "#B4B4BD", "#A8B0C1", "#405F83", "#BCC1D2", "#3E597E", "#080C11", "#1C1C1C", "#557299", "#D7D6DB", "#FDFCEB"], //blues
	//birdland
	["#163341", "#172F47", "#4477A8", "#2A4A69", "#52779B", "#000000", "#384B60", "#1F3350", "#153A69", "#153559", "#9D9990", "#9D9990", "#181E21", "#0C1D32", "#706959", "#D6D3CE", "#534E48", "#3E5766", "#222E34", "#BBB4A4", "#7C7D7F"], //birdland

];
z.streams["color"] = ( dt => {
	let date0 = new Date();
	let t0 = Math.floor(date0.getTime()/1000);
	let state0 = { 
		dt: dt, count: 0,
		choices: playlist[ Math.floor(t0/dt)%playlist.length ]
	};
	return z.streams["clock"].filter( e => e.t%dt===0 )
		.scan( (state, e) => { 
			state.choices = playlist[ Math.floor(e.t/dt)%playlist.length ];
			// state.choices = playlist[ Math.floor(state.count)%playlist.length ];
			state.count = state.count + 1;
			return state;
		}, state0  )
})( 38 );

z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"], z.streams["color"]], (clock, dimensions, color) => { return {clock:clock, dimensions:dimensions, color:color} })
	.scan( (state, e) => { 
		state.clock = e.clock;
		state.dimensions = e.dimensions;
		state.color = e.color;
		state.count = state.count + 1;
		z.tools.logmsg("color.choices = " + e.color.choices);
		return state;
}, {clock:{t:0}, dt:1}  );

//main
( dt => {
	const element = document.querySelector("main");

	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		try {
			let count = e.clock.t/dt;
			let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
			// z.tools.logmsg("in BOX " + color + " color =  " + color);
			Velocity({	
				elements: element, 
				properties: { backgroundColor:  color, backgroundColorAlpha: z.tools.randominteger(0.3,6)/10},
				options: { duration: 1200,  delay: 0, easing: "easeInOutQuad" },
			});
		} catch(err) { z.tools.logerror("box animation ::: " + err ) }
	})
})(9);


//line 1
( dt => {
const nelements=[[...Array(4).keys()],[...Array(4).keys()]][v];
const elements = nelements.reduce( (acc, id) => {
	z.tools.logmsg("create line element ::: " + id);
	let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
	el.setAttributeNS(null, "id", "line1_"+ id);
	el.setAttributeNS(null, "class", "shape line");
	z.elements["svg"].el.appendChild(el);
	acc[id] = { el: el };
return acc;
}, []);
const n = elements.length;
const drawings = [
	e => {
		try {
			let count = e.clock.t/dt;
			let timing = timings[z.tools.randominteger(0,timings.length)];
			let duration = Math.floor(dt*timing[0]*n), delay = z.tools.randominteger(0, dt*timing[1]*n/4);
			let j = count%n;
			let element = elements[j];
			
			// let color = count%n===0 ? "#9a0000" : (count%2===0 ? "#191918" : e.color.choices[z.tools.randominteger(0, e.color.choices.length)]);
			let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
			let cy = j%2===0 ? 0 : e.dimensions.height;
			// let y1 = -1.0*z.tools.randominteger(0, e.dimensions.height);
			// let y2 = z.tools.randominteger(e.dimensions.height, e.dimensions.height*2);
			let x1 = 0;
			let x2 = e.dimensions.width;
			// Velocity({	
			// 	elements: element.el,
			// 	properties: { strokeOpacity: 1.0, stroke: color},
			// 	options: { duration: duration/2,  delay: delay/2 },
			// });
			Velocity({	
				elements: element.el,
				properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.width/4,e.dimensions.width*2), strokeDasharray: z.tools.randominteger(e.dimensions.height/10, e.dimensions.height/2), x1: x1, x2: x2, y1: cy, y2: cy },
				options: { duration: duration,  delay: delay },
			});
		} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
	},
];
z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
	drawings[Math.floor(e.clock.t/(dt*elements.length*2))%drawings.length](e);
})
})(1);

//line 2
( dt => {
const nelements=[[...Array(4).keys()],[...Array(4).keys()]][v];
const elements = nelements.reduce( (acc, id) => {
	z.tools.logmsg("create line element ::: " + id);
	let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
	el.setAttributeNS(null, "id", "line2_"+ id);
	el.setAttributeNS(null, "class", "shape line");
	z.elements["svg"].el.appendChild(el);
	acc[id] = { el: el };
return acc;
}, []);
const n = elements.length;
const drawings = [
	e => {
		try {
			let count = e.clock.t/dt;
			let timing = timings[z.tools.randominteger(0,timings.length)];
			let duration = Math.floor(dt*timing[0]*n), delay = z.tools.randominteger(0, dt*timing[1]*n/4);
			let j = count%n;
			let element = elements[j];
			let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
			let cx = j%2===0 ? 0 : e.dimensions.width;
			// let y1 = -1.0*z.tools.randominteger(0, e.dimensions.height);
			// let y2 = z.tools.randominteger(e.dimensions.height, e.dimensions.height*2);
			let y1 = 0;
			let y2 = e.dimensions.height;
			// Velocity({	
			// 	elements: element.el,
			// 	properties: { strokeOpacity: 1.0, stroke: color},
			// 	options: { duration: duration/2,  delay: delay/2 },
			// });
			Velocity({	
				elements: element.el,
				properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.width/4,e.dimensions.width*2), strokeDasharray: z.tools.randominteger(e.dimensions.height/10, e.dimensions.height/2), x1: cx, x2: cx, y1: y1, y2: y2 },
				options: { duration: duration,  delay: delay },
			});
		} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
	},
];
z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
	drawings[Math.floor(e.clock.t/(dt*elements.length*2))%drawings.length](e);
})
})(1);

//circles0
( dt => {
	let nshapes = [2,4][v];
	let width = window.innerWidth, height = window.innerHeight;
	let colors = ["#163341", "#172F47", "#4477A8", "#2A4A69", "#52779B", "#000000", "#384B60", "#1F3350", "#153A69", "#153559", "#9D9990", "#9D9990", "#181E21", "#0C1D32", "#706959", "#D6D3CE", "#534E48", "#3E5766", "#222E34", "#BBB4A4", "#7C7D7F"]; //birdland
	const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
		let el = document.createElementNS("http://www.w3.org/2000/svg", "circle");
		el.setAttributeNS(null, "id", "circle0_"+ j);
		el.setAttributeNS(null, "class", "shape circle");
		el.setAttributeNS(null, "cy", 0);
		el.setAttributeNS(null, "cx", width/2);
		z.elements["svg"].el.appendChild(el);
		acc[j] = { el: el };
	return acc;
	}, []);

	const drawings = [
		e => {
			try {
				let count = e.clock.t/dt;
				let r = z.tools.randominteger(e.dimensions.min/10, e.dimensions.min);
				let color = colors[z.tools.randominteger(0, colors.length)];
				Velocity({	
					elements: elements[count%nshapes].el,
					properties: { fillOpacity: z.tools.randominteger(1,8)/10, strokeOpacity: 0.0, fill: color, stroke: color, strokeWidth: z.tools.randominteger(1,8)/10*r, strokeDasharray: z.tools.randominteger(8, r), cx: e.dimensions.width/2, cy: 0, r: r },
					options: { duration: z.tools.randominteger(1000*dt*nshapes/3,1000*dt*nshapes), delay: 0 },
				});
			} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
		},
		
	];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		drawings[0](e);
	})
})(2);

};
//controls
( () => { 
	const hidetextlink = document.querySelector("#hidetextlink");
	let texthidden = false;
	Kefir.fromEvents(hidetextlink, "click").onValue( e => {
		if(texthidden) {
			z.elements["main"].el.style["opacity"] = 1.0;
			hidetextlink.innerText = "-";
			hidetextlink.title = "hide text";
			texthidden = false;
		}
		else {
			z.elements["main"].el.style["opacity"] = 0.0;
			hidetextlink.innerText = "+";
			hidetextlink.title = "show text";
			texthidden = true;
		}
	});
})();

window.addEventListener('load', e => {
  z.draw(z);
  window.scroll(0,0);
  // window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 800);
});
window.addEventListener('beforeunload', e => {
	window.scroll(0,0);
});
</script>
</html>
