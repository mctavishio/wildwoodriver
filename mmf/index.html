<!DOCTYPE html>
<html lang="en">
<head>
	<title>Marrow, Muscle, Flight</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="a book of encounters with migration and the divine by Sheila Packa. Exploring stories of women's intersections with God or the gods, the poems trace flights of the ecstatic and the irrevocable."/>
	<meta name="keywords" content="echo and lightning minnesota iron range poet poetry water books publisher publishing packa mctavish duluth minnesota northern minnesota"/>
	<meta name="author" content="Kathy McTavish">
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "WebPage",
			"name": "EchoLightning",
			"breadcrumb": "wildwood river > echo & lightning,
          	"url": "https://wildwoodriver.com/echolightning/index.html",
			"description": "a book of encounters with migration and the divine by Sheila Packa. Exploring stories of women's intersections with God or the gods, the poems trace flights of the ecstatic and the irrevocable.",
			"datePublished": "Tue Sep 27 2022",
          	"image": "/apple-touch-icon.png",
			"author": "https://sheilapacka.com/index.html",
			"license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
		}
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-3PZ9ZMVYEG"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-3PZ9ZMVYEG');
	</script>
	<link rel="stylesheet" href="/css/wr.css"/>
	<style>
		details > summary {
			padding: 4px;
  			cursor: pointer;
		}
		a {
			text-decoration: none;
		}
		.gallery {
			min-width: 95%;
			display: flex;
			flex-wrap: wrap;
			flex-direction: row;
			justify-content: flex-start;
			justify-content: center;
			align-items: baseline; /* flex-start */
			align-content: space-around;
		}
		.gallery > img {
			max-width: 400px;
			min-width: 300px;
			max-width: 44%;
			padding: 10px;
		}

		main, div#contentframe {
			min-width: 90%;
			max-width: 900;
		}
		.album {
			display: flex;
			width:100%;
			flex-wrap: wrap;
			align-items: center;
			flex-direction: row;
			align-content: center;
			justify-content: space-between;
		}
		.album audio {
			flex-basis: 50%;
			flex-grow: 0;
		}
		/*justify-content: space-between || space-around || flex-start || flex-end*/
		/*.album audio {
			padding-left: 2em;
			padding-right: 2em;
			color: red;
		}*/
		input.expandToggle {
			display: none;
		}

		/* Style the button */
		.expandToggleBtn {
			display: inline-block;
			flex-basis: 50%;
			text-align:right;
			color: #fff;
			color: var(--warmwhite);
		}
		.expandToggleBtn:before {
			content: ">> ";
		}
		.expandToggleBtn:hover {
			cursor: pointer;
			text-decoration:underline;
		}

		/* Hide expandable content by default */
		ul.expandable {
		  	/*visibility: collapse;*/
			/*display: flex;*/
			margin-top:2em;
			flex-wrap: wrap;
			align-items: left;
			flex-direction: column;
			justify-content: space-between;
			display: none;
		}
		/* Show hidden content when the checkbox is checked */
		.expandToggle:checked ~ *.expandable {
		  /*visibility: visible;*/
		  flex-basis: 100%;
		  display: block;
		}
	</style>
</head>
<body id="top" >
<div id="subtextframe" class="frame zlowest"></div>
<div id="svgframe" class="frame zlow"><svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame"></svg></div>
<div id="wordframe" class="frame z0"></div>
<!-- <div id="controlframe" class="frame zhighest"></div> -->
<div id="contentframe" class="absolute zhighest">
<div id="mainflex">
<main id="main" class="expand" data-state="expanded">	

<header>
	<h1>Marrow, Muscle, Flight</h1>
	<h2>Gary Boelhower</h2>
</header>
	<p><a href="#summary">book description</a></p>
	<p><a href="https://store.wildwoodriver.com/">buy book (print or ebook)</a></p>
	<p><a href="indexecholightningweb.html">read online (html version)</a></p>
	<p><a href="#projects">related media projects</a></p>
	<p><a href="#thanks">thanks / funding</a></p>
	<p><a href="/index.html">wildwood river home</a></p>
	<p><a href="#" id="soundlink" class="corelink">turn on sound</a> <span class="typewriter small" title="telegraph" id="telegraph"></span></p>
<article id="summary">
	<header>
		<h1>book description</h1>
	</header>
	<div class="book">
	<figure>
		<img  align="right"  width="400px" src="/data/MMF20111014cov_small.jpg"/>
		<figcaption>
			Book cover: painting by Cecilia Ramón.
		</figcaption>
	</figure>
	<p>
			<i>Echo &amp; Lightning</i> (expanded version), is a book of encounters with migration and the divine by <a href="http://www.sheilapacka.com">Sheila Packa</a>. Exploring stories of women's intersections with God or the gods, the poems trace flights of the ecstatic and the irrevocable. The cover image is a painting by visual artist Cecilia Ramón. It is titled "Dawn."
		</p>
		<p>
			Echo &amp; Lightning won the 2011 Goldie Award for Poetry from the <a href="http://goldencrown.org/literary-awards/2011_goldies/">Golden Crown Literary Society.</a>
		</p><hr/><p>
		<p>
			Kirsten Dierking (author of <i>One Red Eye and Northern Oracle</i>) writes:   "So many poems in <i>Echo &amp; Lightning</i> reveal what has to be given away in order to be filled with something greater--a more intense spiritual awareness, a fuller connection with the landscape, a more generous and all-encompassing love.   <i>Echo &amp; Lighting</i> transforms us into something freer, wilder, more given to loving, while reminding us that to fly is to risk leaving the old behind ... "
		</p><hr/><p>
		<p>
			Ellie Schoenfeld, author of <i>The Dark Honey</i>, writes:  "These poems are the story of following one's own instincts to, in one way or another, migrate. They bring us to the exact moment when we surrender to our truest selves, when we allow ourselves to be transported, transformed, resurrected."
		</p><hr/><p>
		<p>
			The Northeast Minnesota Book Award reading team, May 2011 writes: "Lyrical, intimate, all while challenging your personal status quo or inertia. These poems by Sheila Packa evoke all the senses to come to attention - so you don't miss a single, heightened note. Written to be read to the voice of the cello, the experience of reading them to yourself is like swimming in very deep water (at night!)- exciting while pushing you beyond your present limits to LIVE more fully than you ever thought you might!"
		</p>
		<p>
			Wildwood River Press, 2010</br/>
			ISBN: 9780984377718<br/>
			Available in bookstores. <br/>
			Distributor: Ingram<br/>
			$15
		</p>
		<hr/>	
	</div>
</article>
<article id="projects">
	<header>
		<h1>media projects</h1>
	</header>
	<h5>web art link</h5>
	<p><i>mctavish</i></p>
	<p><a href="starfall.html">starfall sequence</a></p>
	<hr/>
</article>
<article id="echolightning">
	<header>
		<h1>echo &amp; lightning (2009)</h1>
		<h2>audio recording</h2>
	</header>
	<div class="textContent album">
		<audio loop=true controls="true" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/echolightningpodcast.mp3" type="audio/mpeg">Your browser does not support the audio tag.</audio>
		<input type="checkbox" class="expandToggle" id="echolightningtoggle"/><label for="echolightningtoggle" class="expandToggleBtn">toggle track list</label>
		<ul class="expandable">
			<li>album  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/echolightningpodcast.mp3">echo & lightning - all</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/dream.mp3">dream (1:49)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/twelvetonegeese.mp3">12 tone geese (2:03)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/rainskylowclouds.mp3">rain sky / low clouds (1:51)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/loverootsilkthread.mp3">loveroot, silk thread (3:08)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/leda.mp3">leda (7:03)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/thunderperfectmind.mp3">thunder / perfect mind (1:59)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/migration.mp3">migration (3:36)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/wolfmoon.mp3">wolf moon (2:36)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/waking.mp3">waking (2:12)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/ajourneyyes.mp3">a journey yes (2:45)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/ingreen.mp3">in green (1:55)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/2skies.mp3">2 skies (3:15)</a></li>
		</ul>
	</div>
</article>
<hr/>

<article id="fearfuljourney">
	<header>
		<h1>fearful journey (2008)</h1>
		<h2>audio recording</h2>
	</header>
	<div class="textContent album">
		<audio loop=true controls="true" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/fearfuljourneypodcast.mp3" type="audio/mpeg">Your browser does not support the audio tag.</audio>
		<input type="checkbox" class="expandToggle" id="fearfuljourneytoggle"/><label for="fearfuljourneytoggle" class="expandToggleBtn">toggle track list</label>
		<ul class="expandable">
			<li>album  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/fearfuljourneypodcast.mp3">fearful journey - all</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/lovenevermeant.mp3">love never meant sky (6:00)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/wingbeat.mp3">the circle i draw (2:29)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/incantation.mp3">incantation: muse (2:54)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/salt.mp3">salt (4:51)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/river.mp3">the river falls (2:08)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/breaking.mp3">breaking into blossom (4:24)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/frieda.mp3">frida's gaze (3:57)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/kanteledreams.mp3">kantele dreams (2:32)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/starfall.mp3">starfall (8:07)</a></li>
		</ul>
	</div>
</article>
<hr/>

<article id="undertow">
	<header>
		<h1>undertow (2010)</h1>
		<h2>audio recording</h2>
	</header>
	<div class="textContent album">
		<audio loop=true controls="true" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/undertowpodcast.mp3" type="audio/mpeg">Your browser does not support the audio tag.</audio>
		<input type="checkbox" class="expandToggle" id="undertowtoggle"/><label for="undertowtoggle" class="expandToggleBtn">toggle track list</label>
		<ul class="expandable">
			<li>album  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/undertowpodcast.mp3">undertow - all</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/immersion.mp3">immersion (3:16) </a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/strangesymmetry.mp3">strange symmetry (3:13)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/after.mp3">after (3:233)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/eurydice.mp3">eurydice (2:05)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/vigil.mp3">vigil (2:25)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/whatsea.mp3">what sea (3:10)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/riverbegins.mp3">river begins (2:11)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/invisibleembrace.mp3">invisible embrace (3:07)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/drift.mp3">drift (1:57)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/morning.mp3">morning (1:48)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/hull.mp3">hull (2:59)</a></li>
			<li>track  &raquo; <a href="https://storage.googleapis.com/www.blueboatfilms.com/sound/helpless.mp3">helpless (1:56)</a></li>
		</ul>
	</div>
</article>
	<hr/>
<article id="thanks">
	<header>
		<h1>thanks</h1>
	</header>
	<div>
		<p>
		Thank you to the Arrowhead Regional Arts Council and the Loft McKnight Fellowships for past financial support.
		</p>
	</div>
</article>
<hr/>
<audio loop=true id="audio1">
<source src="https://storage.googleapis.com/www.blueboatfilms.com/sound/starfallremix.mp3" type="audio/mpeg">
</audio>
</main>
</div>
</div>
<div id="hidetext"><a id="hidetextlink" href="#" title="hide text">-</a></div>

</body>
<script src="../code/velocity.min.js"></script>
<script src="../code/kefir201911.min.js"></script>
<!-- <script src="code/atlasabsence.js"></script> -->
<script>
let width = window.innerWidth, height = window.innerHeight;
let min = Math.min(width, height), max = Math.max(width, height);
let version = (min < 680 || max < 980) ? "small" : "large";
let v = version === "small" ? 0 : 1;
let z = {};
z.tools = {
	randominteger: (min, max) => {
		return Math.floor( min + Math.random()*(max-min));
	},
	logmsg: function(msg) {
		try {
			console.log("### ::: " + msg);
		}
		catch(err) { z.tools.logerror(err) }
	},
	logerror: function(error) {
		try { console.log("rusty error ... " + error); }
		catch(err) {}
	},
	randomhighharmonic: () => {
		let multipliers = [10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomlowharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ]/2;
	},
	randomkey: (object) => {
		let keys = Object.keys(object);
		let key = keys[z.tools.randominteger(0,keys.length)];
		// z.tools.logmsg("key = " + key);
		return key;
	},
	datestr: (date, options) => {
		if(options===undefined) options = {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"};
		return date.toLocaleTimeString("en-US", options);
		//new Date().toLocaleTimeString("en-US", {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"});
	},
	togrid: (min=1, max=1, x=1, ndivisions=1) => {
		let dx = Math.floor( (max-min) / ndivisions );
		return Math.floor( ( x-min+dx/2)/dx )*dx + min;
	},
};
//core elements
z.elements = ( () => {
	return {
		body: { el: document.querySelector("body") },
		main: { el: document.querySelector("main") },
		// clock: { el: document.querySelector("#clock") },
		// telegraph: { el: document.querySelector("#telegraph") },
		svg:  { el: document.querySelector("#svg") },
		frames: ["subtextframe", "svgframe", "wordframe", "contentframe"].reduce( (acc, id) => {
			z.tools.logmsg("create frame element ::: " + id);
			acc[id] = { el: document.querySelector("#"+id) };
			return acc;
		}, {}),
	}
})()

z.streams = {
	clock: ( () => {
	let dt = 1;
	let date0 = new Date();
	let t0 = Math.floor(date0.getTime()/1000);
	let state0 = { dt: dt, count: 0, date: date0, t: t0, t0: t0 };
	return Kefir.withInterval( dt*1000, emitter => { emitter.emit( { date: new Date() } ) })
			.scan( (state, e) => {
				state.date = e.date;
				state.t = Math.floor(e.date.getTime()/1000);
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( ),
	dimensions: ( () => {
		let dt = .4;
		const ngrids=[2,2], npasts=[0,0];
		let state0 = { dt: dt, count: 0,
			grid: { nrows: ngrids[v], ncols: ngrids[v], dx: Math.floor(width/ngrids[v]), dy: Math.floor(height/ngrids[v]), sw: 12, pastn: npasts[v] },
			width: width, height: height,
			max: max, min: min,
		};
		return Kefir.fromEvents(window, "resize").throttle(dt*1000)
			.scan( (state,e) => {
				state.width = window.innerWidth;
				state.height = window.innerHeight;
				state.max = Math.max(state.width, state.height);
				state.min = Math.min(state.width, state.height);
				state.grid.dx = Math.floor(state.width/state.grid.ncols);
				state.grid.dy = Math.floor(state.height/state.grid.nrows);
				state.grid.sw = Math.floor(Math.max(state.grid.dx*.03, state.grid.dy*.03, 4));
				return state
			}, state0)
	})( ),
};

z.draw = z => {
	let ntimings = 32;
	let dtiming = Math.floor(400/ntimings);
	const timings = [...Array(ntimings).keys()].reduce( (acc, j) => {
		let duration = 500+(j*dtiming);
		acc[j] = [duration, 900-duration];
	return acc;
	}, []);
	// const timings = [ [380,600], [400,580], [480,500], [500,480], [580,400], [600,380], [640,340], [680,300], [700,280], [740,240], [780,200], [800,180], [840,140], [880,100]];
	// const timings = [ [180,800], [200,780], [280,700], [300,680], [380,600], [400,580], [480,500], [500,480], [580,400], [600,380], [640,340], [680,300], [700,280], [740,240], [780,200], [800,180], [840,140], [880,100]];
	// z.streams["clock"].onValue( e => {
	// 	z.elements["clock"].el.innerHTML = z.tools.datestr(new Date(e.t*1000));
	// });

	//controls
	( () => {
		const soundlink = document.querySelector("#soundlink");
		// const telegraph = document.querySelector("#telegraph");
		const audio1 = document.querySelector("#audio1");
		const baseurl = "https://storage.googleapis.com/www.blueboatfilms.com/sound/";
		const tracks = [
			{title: "bent / hOwl", url: "benthowlpodcast.mp3", duration:3240}, //54:00
			// {title: "graffiti / tunnel", url: "graffititunnelpodcast.mp3", duration:2710}, //45:12

		];
		let currenttrack = 0;
		let soundplaying = false;
		let track = tracks[0];
		audio1.src = baseurl + track.url;
		Kefir.fromEvents(soundlink, "click").onValue( e => {
			z.tools.logmsg("play sound !");
			if(!soundplaying) {
				try {
					// currenttrack = (currenttrack+1)%tracks.length;
					// let track = tracks[currenttrack];
					// audio1.src = baseurl + track.url;
					// let starttime = z.tools.randominteger(0,track.duration);
					// let starttime = 0;
					// audio1.currentTime = starttime;
					audio1.play();
					z.tools.logmsg("playback resumed");
					// telegraph.innerHTML =  "<i>(currently playing ::: " + track.title + ")</i>";
					soundplaying = true;
					soundlink.innerText = "turn off sound";
					soundlink.classList.add("active");
				} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) }
			}
			else {
				try {
					document.querySelector("#audio1").pause();
					// telegraph.innerHTML =  " . . . >";
					soundplaying = false;
					soundlink.innerText = "turn on sound";
					soundlink.classList.remove("active");
				} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
			}
		});
	})();

	const playlist = [
		//mmf book colors
		["#1F1E21", "#D6374E", "#D9AD5B", "#F2BE7E", "#BF0404"], 
		//["#A62D37", "#D9AD5B", "#F2BE7E"], 
		["#A62D37", "#592730", "#F2BE7E", "#8C0303"], 
		["#A62D37", "#D9AD5B", "#F2BE7E", "#BF0404"], 
	];
	z.streams["color"] = ( dt => {
		let date0 = new Date();
		let t0 = Math.floor(date0.getTime()/1000);
		let state0 = {
			dt: dt, count: 0,
			choices: playlist[ Math.floor(t0/dt)%playlist.length ]
		};
		return z.streams["clock"].filter( e => e.t%dt===0 )
			.scan( (state, e) => {
				state.choices = playlist[ Math.floor(e.t/dt)%playlist.length ];
				// state.choices = playlist[ Math.floor(state.count)%playlist.length ];
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( 38 );

	z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"], z.streams["color"]], (clock, dimensions, color) => { return {clock:clock, dimensions:dimensions, color:color} })
		.scan( (state, e) => {
			state.clock = e.clock;
			state.dimensions = e.dimensions;
			state.color = e.color;
			state.count = state.count + 1;
			z.tools.logmsg("color.choices = " + e.color.choices);
			return state;
	}, {clock:{t:0}, dt:1}  );

//box
( dt => {
	const element = document.createElementNS("http://www.w3.org/2000/svg", "rect");
	element.setAttributeNS(null, "id", "box");
	element.setAttributeNS(null, "class", "shape square");
	z.elements["svg"].el.appendChild(element);

	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		try {
			let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
			Velocity({
				elements: element,
				properties: { fillOpacity: 1.0, strokeOpacity: 0.0, fill: color, width: e.dimensions.width, height: e.dimensions.height },
				options: { duration: 2000,  delay: 0, easing: "easeInOutQuad" },
			});
		} catch(err) { z.tools.logerror("box animation ::: " + err ) }
	})
})(5);

//main
( dt => {
	const element = document.querySelector("main");
	const bgcolors = ["rgba(25, 25, 24, 0.4)", "rgba(25, 25, 24, 0.6)", "rgba(25, 25, 24, 0.9)", "rgba(252, 251, 227, 0.4)", "rgba(252, 251, 227, 0.9)", , "rgba(252, 251, 227, 0.6)"]
	// const warmblacktints = ["#191918", "#2f2f2f", "#464646", "#5e5e5d", "#757574", "#8c8c8b", "#a3a3a2", "#babab9", "#d1d1d0", "#e8e8e7", "#ffffff", "#fcfbe3", "#e2e1cc", "#c9c8b5", "#b0af9e", "#979688", "#7e7d71", "#64645a", "#4b4b44", "#32322d", "#191916", "#000000"];
	const warmblacktints = ["#191918", "#fcfbe3", "#000000"];

	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		try {
			let count = e.clock.t/dt;
			let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
			// z.tools.logmsg("in BOX " + color + " color =  " + color);
			Velocity({
				elements: element,
				properties: { backgroundColor:  color, backgroundColorAlpha: z.tools.randominteger(0.1,6)/10},
				options: { duration: 1200,  delay: 0, easing: "easeInOutQuad" },
			});
		} catch(err) { z.tools.logerror("box animation ::: " + err ) }
	})
})(9);

//circles 1
( dt => {
	const nelements=[[...Array(4).keys()],[...Array(4).keys()]][v];
	const elements = nelements.reduce( (acc, id) => {
		z.tools.logmsg("create line element ::: " + id);
		let el = document.createElementNS("http://www.w3.org/2000/svg", "circle");
		el.setAttributeNS(null, "id", "circle1_"+ id);
		el.setAttributeNS(null, "class", "shape circle");
		el.setAttributeNS(null, "stroke-opacity", "0.0");
		el.setAttributeNS(null, "fill-opacity", "0.0");
		el.setAttributeNS(null, "cy", Math.floor(window.innerHeight/2));
		el.setAttributeNS(null, "cx", Math.floor(window.innerWidth/2));
		z.elements["svg"].el.appendChild(el);
		acc[id] = { el: el };
	return acc;
	}, []);
	// const cxs = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9];
	const cxs = [0.2,0.4,0.6,0.8];
	const cys = [0.2,0.4,0.6,0.8];
	const n = elements.length;
	const drawings = [
		e => {
			try {
				let count = e.clock.t/dt;
				let timing = timings[z.tools.randominteger(0,timings.length)];
				let duration = dt*timing[0]*n, delay = z.tools.randominteger(0, dt*timing[1]*n);
				let element = elements[count%n];
				let cy = z.tools.randominteger(0, e.dimensions.height);
				let cx = z.tools.randominteger(0, e.dimensions.width);
				let radius = z.tools.randominteger(14, e.dimensions.min);
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				Velocity({
					elements: element.el,
					properties: { fillOpacity: 1.0, strokeOpacity: 0.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.min/2, e.dimensions.min/6), strokeDasharray: z.tools.randominteger(8, e.dimensions.min), fill: color, cx: cx, cy: cy, r: radius },
					options: { duration: duration,  delay: delay },
				});
			} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
		},

	];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		drawings[Math.floor(e.clock.t/(dt*elements.length))%drawings.length](e);
	})
})(5);

//circles 2
( dt => {
	const nelements=[[...Array(16).keys()],[...Array(32).keys()]][v];
	let width = window.innerWidth, height = window.innerHeight;
	const elements = nelements.reduce( (acc, id) => {
		z.tools.logmsg("create line element ::: " + id);
		let el = document.createElementNS("http://www.w3.org/2000/svg", "circle");
		el.setAttributeNS(null, "id", "circle2_"+ id);
		el.setAttributeNS(null, "class", "shape circle");
		el.setAttributeNS(null, "stroke-opacity", "0.0");
		el.setAttributeNS(null, "fill-opacity", "0.1");
		el.setAttributeNS(null, "cy", height/2);
		el.setAttributeNS(null, "cx", width/2);
		// el.setAttributeNS(null, "r", height/6);
		z.elements["svg"].el.appendChild(el);
		acc[id] = { el: el };
	return acc;
	}, []);
	// const cxs = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9];
	const cxs = [0.2,0.5,0.8];
	const cys = [0.2,0.5,0.8];
	const n = elements.length;
	const drawings = [
		e => {
			try {
				let count = e.clock.t/dt;
				let timing = timings[z.tools.randominteger(0,timings.length)];
				let duration = dt*timing[0], delay = z.tools.randominteger(0, dt*timing[1]);
				let element = elements[count%n];
				let cy = e.dimensions.height*cys[z.tools.randominteger(0,cys.length)];
				// let cx = e.dimensions.width*cxs[z.tools.randominteger(0,cxs.length)];
				let cx = e.dimensions.width*cxs[(count%n)%cxs.length];
				let radius = z.tools.randominteger(14, e.dimensions.min/2);
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				Velocity({
					elements: element.el,
					properties: { fillOpacity: 1.0, strokeOpacity: 0.0, stroke: color, strokeWidth: z.tools.randominteger(radius/2, radius/4), strokeDasharray: z.tools.randominteger(8, radius), fill: color, cx: cx, cy: cy, r: radius },
					options: { duration: duration*n/2,  delay: delay },
				});
				Velocity({
					elements: element.el,
					properties: { r: radius/4 },
					options: { duration: duration*n/2,  delay: delay*n },
				});
			} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
		},

	];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		drawings[Math.floor(e.clock.t/(dt*elements.length))%drawings.length](e);
	})
})(1);



const p = [
	e => {
		let cy = z.tools.randominteger(0,e.dimensions.height);
		return {
			xend: [-2.0*e.dimensions.width, z.tools.randominteger(-1.0*e.dimensions.width/4, -1.0*e.dimensions.width/2)],
			xstart: [z.tools.randominteger(e.dimensions.width*1.2, e.dimensions.width*1.4), 2*e.dimensions.width],
			ystart: [cy,cy], yend: [cy,cy]
		}
	},
	e => {
		let cx = z.tools.randominteger(0,e.dimensions.width);
		return {
			yend: [-2.0*e.dimensions.height, z.tools.randominteger(-1.0*e.dimensions.height/4, -1.0*e.dimensions.height/2)],
			ystart: [z.tools.randominteger(e.dimensions.height*1.2, e.dimensions.height*1.4), 2*e.dimensions.height],
			xstart: [cx,cx], xend: [cx,cx]
		}
	},
	e => {
		let cy = z.tools.randominteger(0,e.dimensions.height);
		return {
			xstart: [-2.0*e.dimensions.width, z.tools.randominteger(-1.0*e.dimensions.width/4, -1.0*e.dimensions.width/2)],
			xend: [z.tools.randominteger(e.dimensions.width*1.2, e.dimensions.width*1.4), 2*e.dimensions.width],
			ystart: [cy,cy], yend: [cy,cy]
		}
	},
	e => {
		let cx = z.tools.randominteger(0,e.dimensions.width);
		return {
			ystart: [-2.0*e.dimensions.height, z.tools.randominteger(-1.0*e.dimensions.height/4, -1.0*e.dimensions.height/2)],
			yend: [z.tools.randominteger(e.dimensions.height*1.2, e.dimensions.height*1.4), 2*e.dimensions.height],
			xstart: [cx,cx], xend: [cx,cx]
		}
	}
];


};

//controls
( () => {
	const hidetextlink = document.querySelector("#hidetextlink");
	let texthidden = false;
	Kefir.fromEvents(hidetextlink, "click").onValue( e => {
		if(texthidden) {
			z.elements["main"].el.style["opacity"] = 1.0;
			hidetextlink.innerText = "-";
			hidetextlink.title = "hide text";
			texthidden = false;
		}
		else {
			z.elements["main"].el.style["opacity"] = 0.0;
			hidetextlink.innerText = "+";
			hidetextlink.title = "show text";
			texthidden = true;
		}
	});
})();
window.addEventListener('load', e => {
  z.draw(z);
  window.scroll(0,0);
  // window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 800);
});
window.addEventListener('beforeunload', e => {
	window.scroll(0,0);
});
</script>

</html>
