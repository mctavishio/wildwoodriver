<!DOCTYPE html>
<html lang="en">
<head>

	<title>Night Train Red Dust</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
	<meta name="description" content="web book These poems are about the Iron Range in Minnesota, the Vermilion Trail, and they are stories of travel and derailment about mining, radical politics, unionizing, accordion music and strong women. The book brings together history, geology and the community of people with iron in their veins."/>
	<meta name="author" content="Sheila Packa">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "WebPage",
			"name": "Night Train Red Dust",
			"breadcrumb": "core text",
          	"url": "https://wildwoodriver.com/ntrd/indexnighttrainweb.html",
			"description": "web book These poems are about the Iron Range in Minnesota, the Vermilion Trail, and they are stories of travel and derailment about mining, radical politics, unionizing, accordion music and strong women. The book brings together history, geology and the community of people with iron in their veins.",
			"datePublished": "Tue May 24 2022",
          	"image": "/apple-touch-icon.png",
			"author": "https://sheilapacka.com/index.html",
			"license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
		}
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-3PZ9ZMVYEG"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-3PZ9ZMVYEG');
	</script>
	<link rel="stylesheet" href="/css/wr.css"/>
	<style>
		main article:nth-child(odd) a:before {
			color: #fcfbe3;
			color: var(--warmwhite);
			content: ": ";
		}
		main article:nth-child(even) a:before {
			color: #000000;
			color: var(--warmblack);
			content: ": ";
		}
		details > summary {
			padding: 4px;
  			cursor: pointer;
		}
		a {
			text-decoration: none;
		}
		.gallery {
			min-width: 95%;
			display: flex;
			flex-wrap: wrap;
			flex-direction: row;
			justify-content: flex-start;
			justify-content: center;
			align-items: baseline; /* flex-start */
			align-content: space-around;
		}
		.gallery > img {
			max-width: 400px;
			min-width: 300px;
			max-width: 44%;
			padding: 10px;
		}

		main, div#contentframe {
			min-width: 90%;
			max-width: 900;
		}
	</style>
</head>
<body id="top" >
<div id="subtextframe" class="frame zlowest"></div>
<div id="svgframe" class="frame zlow"><svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame"></svg></div>
<div id="wordframe" class="frame z0"></div>
<!-- <div id="controlframe" class="frame zhighest"></div> -->
<div id="contentframe" class="absolute zhighest">
<div id="mainflex">
<main id="main" class="expand" data-state="expanded">	

<header>
	<h1>Night Train Red Dust: Poems of the Iron Range</h1>
	<h2>Sheila Packa</h2>
</header>
	<p><a href="#summary">book description</a></p>
	<p><a href="https://store.wildwoodriver.com/">buy book (print or ebook)</a></p>
	<p><a href="indexnighttrainweb.html">read online (html version)</a></p>
	<p><a href="#projects">related media projects</a></p>
	<p><a href="#thanks">thanks / funding</a></p>
	<p><a href="/index.html">home</a></p>
	<p><a href="#" id="soundlink" class="corelink">turn on sound</a> <span class="typewriter small" title="telegraph" id="telegraph"></span></p>
<article id="summary">
	<header>
		<h1>book description</h1>
	</header>
	<div class="book">
	<figure>
		<img  align="right"  width="400px" src="/data/nightTrainRedDust_cov_small.png"/>
		<figcaption>
			train tracks
		</figcaption>
	</figure>
	<p>
	These poems are about the Iron Range in Minnesota, the Vermilion Trail, and they are stories of travel and derailment about mining, radical politics, unionizing, accordion music and strong women. The book brings together history, geology and the community of people with iron in their veins.
	</p><hr/><p>
	"I excavate these words from a vein of iron...” these poems are “test drills and core samples” — a weave of memory, archive, dream, song, story — drawn from the history and people of the Iron Range of northeastern Minnesota. These pages sound the whistles and roar of the mines, the dust in the lungs, the dangerous crossings into a new language, the accordion’s breath. Culled from violence and tenderness, bone and ash, ore and light, they map a place, a time, a journey through love"<br/> --Pamela Mittlefehldt, PhD and co-editor The Heart of All That Is: Reflections on Home Holy Cow! Press
	</p><hr/><p>
	"Sheila Packa’s poetry is at once deeply personal and widely universal in its evocative exploration of fundamental human experience. Using the red ore dust with which she was raised, she paints vivid images of birth and death, work and struggle, hope and despair. Packa captures the unrest of immigrants leaving their homes in Finland and the unrest of the bitter labor union conflicts of the early days of twentieth century on the Iron Range of northeastern Minnesota. At the same as she chronicles events from the broad sweep of history as the country extracted iron ore from the ground and labor from the immigrants, she shares tender stories from daily life, using the micro-lens of her personal experience.
	</p><p>
Especially arresting is the way Packa weaves into her book material from historical sources, including newspaper accounts of the union organizing efforts of Elizabeth Gurley Flynn and reports on the gritty work of physicians who tended to the medical needs of the miners and their families in the early days. Women —whether in the mines or on hardscrabble farms — are equal players in Packa’s Iron Range, a refreshing treatment of a region often seen as differentially the province of the male. From the story of men and women fighting for their survival and dignity in the days of industrialization to the image of a fragile grouse in the gunsights of a hunter contemplating its mortality, Packa captures the beauty and the contradictions of the place and times that have made the Iron Range iconic in history".
<br/>--Leah Rogne, PhD, Professor, Minnesota State University, Mankato
</p>
<p>
Wildwood River Press, 2014<br/>
ISBN 978-0-9843777-7-0<br/>
Available in bookstores.<br/>
Distributor: Ingram<br/>
$15
</p>
		<hr/>	
	</div>
</article>
<article id="thanks">
	<header>
		<h1>thanks</h1>
	</header>
	<div>
		<p>
		Thank you to the community of writers and artists in the Northeast Minnesota region, especially Pamela Mittlefehldt and Gary Boelhower. Thank you to Kathy McTavish for music, art, passion, and inspiration. This project was made possible through a fiscal year 2012–2013 McKnight/ACHF/ARAC Individual Artist Fellowship Grant from the Arrowhead Regional Arts Council (www.aracouncil. org) which is funded in part with money from the Minnesota Arts and Cultural Heritage Fund as appropriated by the Minnesota State Legislature with money from the vote of the people of Minnesota on November 4, 2008 and the McKnight Foundation. This book is dedicated to my paternal grandparents Jacob Packa and Helen Konsteri Packa and my maternal grandparents, Nellie Mariana Palo Kamunen and Nikolai Oskar Kamunen. Cover design by Kathy McTavish and Sheila Packa Author Photograph by Magic Box Photography, Duluth, MN 55805.
		</p>
	</div>
</article>
<article id="projects">
	<header>
		<h1>media projects</h1>
	</header>
	<h5>was it i</h5>
	<p><i>composer: Wendy Durrwachter</i></p>
	<div class="vimeowrapper16x9" >
		<iframe width="560" height="315" src="https://www.youtube.com/embed/6iTMUqVzYA0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>In the Water-Filled Mine Pit</h5>
	<p><i>composer & media artist: Sara Pajunen</i></p>
	<div class="vimeowrapper16x9" >
		<iframe title="vimeo-player" src="https://player.vimeo.com/video/766556779?h=f1dee7eef7" width="640" height="360" frameborder="0" allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>map to cloud mountain</h5>
	<p><i>composer & media artist: Kathy McTavish</i></p>
	<p><i>text/voice: Cecilia Ram&oacute;n & Sheila Packa</i></p>
	<div class="vimeowrapper16x9">
		<iframe src="https://player.vimeo.com/video/61796790?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<details>
		<summary>click to read text</summary>
	<p>cecilia (translations):</p>
	<p>
	how could i have known that i was packing my whole life at that moment ... <br/>how could i have known that when i said good bye in the back room and you and i sat in the bed and you gave that big big hug ... i would not see you again ...<br/>c&oacute;mo pod&iacute;a saber que estaba empacando realmente toda mi en ese moment ...<br/>c&oacute;mo pod&iacute;a saber que cuando me desped&iacute;, y nos sentamos juntas en la cam, y me diste ese abrazo abrazo grande, ya no te ver&iacute;a ...<br/><br/>it was midday, the phone rang, she told me that you had passed the night before ...<br/>y era el mediod&iacute;a, son&oacute; el tel&eacute;fono, ella me dijo que hab&iacute;as fallecido la noche anterior ... me qued&eacute; callada ...<br/><br/>snow keeps falling ... sigue  nevando ... snow keeps falling and it's january ... i keep confusing the beach in san bernardo with this frozen lake ...<br/>sigue  nevando y es enero ... me sigo confundiendo con la playa en san bernardo o este enero con el lago congelado ...<br/><br/><br/>sheila:<br/><br/>no other morning like this ...<br/><br/>I waited a long time for day break<br/>listening to the faint sound of a battery<br/>in the clock and each minute<br/>measured, mechanical, slowly pushing<br/>away from my father's last breath<br/><br/>...<br/><br/>rupture ... it happened / or it didn't happen / it was a shadow ...<br/>
	</p>
	</details>
	<hr/>
	<h5>my geology</h5>
	<p><i>composer & media artist: Kathy McTavish</i></p>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/101956156?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>One River Many Stories: St Louis River</h5>
	<p><i>One River Many Stories collective</i></p>
	<p>see more at: <a href="http://onerivermn.com/">documentation website</a></p>
	<p>
	People in the St. Louis River watershed share their connection to the river with WDSE, Duluth PBS, as part of a community experiment. One River, Many Stories is a collaboration of storytellers in the region focused on a single topic. More stories by WDSE at wdse.org. More information about the project at www.OneRiverMN.com
	</p>
	<div class="vimeowrapper16x9" >
		<iframe width="560" height="315" src="https://www.youtube.com/embed/31Qd47PDKsk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>mill city requiem</h5>
	<p><i>composer & media artist: Kathy McTavish</i></p>
	<p>see more at: <a href="https://mctavish.io/millcity/index.html">documentation website</a></p>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/132493538?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>ekphrastic quilts</h5>
	<p><i> Leslie Hughes</i></p>
	<p>in response to the poem "Water-filled Mine Pit"</p>
	<div class="gallery"  id="here">
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh001.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh001.jpg" alt="quilt 001"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh002.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh002.jpg" alt="quilt 002"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh003.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh003.jpg" alt="quilt 003"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh004.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh004.jpg" alt="quilt 004"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh005.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh005.jpg" alt="quilt 005"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh006.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh006.jpg" alt="quilt 006"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh007.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh007.jpg" alt="quilt 007"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh008.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh008.jpg" alt="quilt 008"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh009.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh009.jpg" alt="quilt 009"/>
		<img onClick="window.open('https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/lh010.jpg')" src="https://storage.googleapis.com/www.blueboatfilms.com/stills/3riversnordiccenter/size300/lh010.jpg" alt="quilt 010"/>
	</div>
</article>
<audio loop=true id="audio1">
<source src="https://storage.googleapis.com/www.blueboatfilms.com/sound/starfallremix.mp3" type="audio/mpeg">
</audio>
</main>
</div>
</div>
<div id="hidetext"><a id="hidetextlink" href="#" title="hide text">-</a></div>

</body>
<script src="../code/velocity.min.js"></script>
<script src="../code/kefir201911.min.js"></script>
<!-- <script src="code/atlasabsence.js"></script> -->
<script>
let width = window.innerWidth, height = window.innerHeight;
let min = Math.min(width, height), max = Math.max(width, height);
let version = (min < 680 || max < 980) ? "small" : "large";
let v = version === "small" ? 0 : 1;
let z = {};
z.tools = {
	randominteger: (min, max) => {
		return Math.floor( min + Math.random()*(max-min));
	},
	logmsg: function(msg) {
		try { 
			console.log("### ::: " + msg); 
		}
		catch(err) { z.tools.logerror(err) }
	},
	logerror: function(error) {
		try { console.log("rusty error ... " + error); }
		catch(err) {}
	},
	randomhighharmonic: () => {
		let multipliers = [10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomlowharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ]/2;
	},
	randomkey: (object) => {
		let keys = Object.keys(object);
		let key = keys[z.tools.randominteger(0,keys.length)];
		// z.tools.logmsg("key = " + key);
		return key;
	},
	datestr: (date, options) => {
		if(options===undefined) options = {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"};
		return date.toLocaleTimeString("en-US", options);
		//new Date().toLocaleTimeString("en-US", {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"});
	},
	togrid: (min=1, max=1, x=1, ndivisions=1) => {
		let dx = Math.floor( (max-min) / ndivisions );
		return Math.floor( ( x-min+dx/2)/dx )*dx + min;
	},
};
//core elements
z.elements = ( () => {
	return {
		body: { el: document.querySelector("body") },
		main: { el: document.querySelector("main") },
		// clock: { el: document.querySelector("#clock") },
		// telegraph: { el: document.querySelector("#telegraph") },
		svg:  { el: document.querySelector("#svg") },
		frames: ["subtextframe", "svgframe", "wordframe", "contentframe"].reduce( (acc, id) => {
			z.tools.logmsg("create frame element ::: " + id);
			acc[id] = { el: document.querySelector("#"+id) };
			return acc;
		}, {}),
	}
})()
	
z.streams = {
	clock: ( () => {
	let dt = 1;
	let date0 = new Date();
	let t0 = Math.floor(date0.getTime()/1000);
	let state0 = { dt: dt, count: 0, date: date0, t: t0, t0: t0 };
	return Kefir.withInterval( dt*1000, emitter => { emitter.emit( { date: new Date() } ) })
			.scan( (state, e) => { 
				state.date = e.date;
				state.t = Math.floor(e.date.getTime()/1000);
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( ),
	dimensions: ( () => {
		let dt = .4;
		const ngrids=[2,2], npasts=[0,0];
		let state0 = { dt: dt, count: 0,
			grid: { nrows: ngrids[v], ncols: ngrids[v], dx: Math.floor(width/ngrids[v]), dy: Math.floor(height/ngrids[v]), sw: 12, pastn: npasts[v] },
			width: width, height: height, 
			max: max, min: min, 
		};
		return Kefir.fromEvents(window, "resize").throttle(dt*1000)
			.scan( (state,e) => {
				state.width = window.innerWidth;
				state.height = window.innerHeight;
				state.max = Math.max(state.width, state.height);
				state.min = Math.min(state.width, state.height);
				state.grid.dx = Math.floor(state.width/state.grid.ncols);
				state.grid.dy = Math.floor(state.height/state.grid.nrows);
				state.grid.sw = Math.floor(Math.max(state.grid.dx*.03, state.grid.dy*.03, 4));
				return state
			}, state0) 
	})( ),
};

z.draw = z => {
	let ntimings = 32;
	let dtiming = Math.floor(400/ntimings);
	const timings = [...Array(ntimings).keys()].reduce( (acc, j) => {
		let duration = 500+(j*dtiming);
		acc[j] = [duration, 900-duration];
	return acc;
	}, []);
	// const timings = [ [380,600], [400,580], [480,500], [500,480], [580,400], [600,380], [640,340], [680,300], [700,280], [740,240], [780,200], [800,180], [840,140], [880,100]];
	// const timings = [ [180,800], [200,780], [280,700], [300,680], [380,600], [400,580], [480,500], [500,480], [580,400], [600,380], [640,340], [680,300], [700,280], [740,240], [780,200], [800,180], [840,140], [880,100]];
	// z.streams["clock"].onValue( e => {
	// 	z.elements["clock"].el.innerHTML = z.tools.datestr(new Date(e.t*1000));
	// });

//controls
( () => { 
	const soundlink = document.querySelector("#soundlink");
	const telegraph = document.querySelector("#telegraph");
	const audio1 = document.querySelector("#audio1");
	const baseurl = "https://storage.googleapis.com/www.blueboatfilms.com/sound/";
	const tracks = [
		// {title: "holy fool", url: "holyfoolpodcast.mp3", duration: 1720},//28:43
		// {title: "ocean | wind | grief", url: "oceanwindgriefpodcast.mp3", duration: 1870},//31:18
		// {title: "nyx", url: "oceanwindgriefpodcast.mp3", duration: 1280},//21:26
		{title: "ahab's dream", url: "ahabsdreampodcast.mp3", duration: 1220},//20:24
	];
	let currenttrack = 0;
	let soundplaying = false;
	let track = tracks[0];
	audio1.src = baseurl + track.url;
	Kefir.fromEvents(soundlink, "click").onValue( e => {
		z.tools.logmsg("play sound !");
		if(!soundplaying) { 
			try {
				// currenttrack = (currenttrack+1)%tracks.length;
				// let track = tracks[currenttrack];
				// audio1.src = baseurl + track.url;
				// let starttime = z.tools.randominteger(0,track.duration);
				// let starttime = 0;
				// audio1.currentTime = starttime;
				audio1.play();
				z.tools.logmsg("playback resumed");
				telegraph.innerHTML =  "<i>(currently playing ::: " + track.title + ")</i>";
				soundplaying = true;
				soundlink.innerText = "turn off sound";
				soundlink.classList.add("active");
			} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) } 
		}
		else { 
			try {
				document.querySelector("#audio1").pause();
				telegraph.innerHTML =  "";
				soundplaying = false;
				soundlink.innerText = "turn on sound";
				soundlink.classList.remove("active");
			} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
		}
	});
})();

	const playlist = [
		//primary colors
		// ["#fcfbe3", "#191918"], //"warmbw",
		// ["#9a0000", "#fcfbe3", "#191918"], //"warmbwred",
		// ["#fcfbe3", "#191918"], //"warmbw",
		// ["#ffcc00", "#fcfbe3", "#191918"], //"warmbwyellow",
		// ["#fcfbe3", "#191918"], //"warmbw",
		// ["#006699", "#fcfbe3", "#191918", "#4b4b44"], //"warmbwbluegray",
		// ["#006699", "#fcfbe3", "#191918", "#004488"], //"warmbwbluegray",
		// ["#006699", "#fcfbe3", "#191918"], //"warmbwblue",
		// ["#006699", "#006666", "#fcfbe3", "#191918"], //"warmbwbluegreen",
		//lake superior
		// ["#CCD8EA", "#CBD3DA", "#818794", "#5B5756", "#413A36", "#413B30"], //lake superior
		["#BEC4D0", "#C9CDD8", "#7E808C", "#282730", "#54545F", "#A5ACBF", "#AAA9A5", "#FBFBFF", "#535763", "#211F2B"], //canada snow
		["#C7CED8", "#C2C5CC", "#9C9A9D", "#454140", "#454140", "#383330", "#473D3B", "#767B7F"], //lake superior
		["#4E505D", "#4F525A", "#808394", "#A4AAB8", "#DEE5F7", "#E6EFFD"], //ice snow river
		["#8F97A2", "#5A575E", "#666A79", "#474C58", "#8790A0", "#B5C2D2", "#4E5043", "#181919"], //winter blue green tree
		["#BCBFC4", "#B9BABE", "#9FA0A5", "#98999E", "#72757A", "#63686E", "#555F64", "#505C60"], //subtle lake surface grays
		["#093F68", "#005A98", "#000112", "#E8ECF5", "#A8B5C8", "#538096", "#45758A", "#234E64", "#001929", "#0A4761", "#00132A", "#095A74", "#033A56", "#0C6180"], //lake superior (very blue)
		["#F2F4F8", "#90A2B1", "#475360", "#4E3728", "#B95F2E", "#4C5B70", "#678296", "#293E45"], //lake superior
		["#F6E8DD", "#BC8860", "#3B3735", "#405D68", "#041D24", "#606F6D", "#26383F", "#2F4D58", "#2F4652", "#657678", "#5A5858", "#19323D", "#837C75", "#854529"], //lake superior (blue with orange)
		["#839FB6", "#AEB7BF", "#A3A6A9", "#797B7B", "#3D4048", "#393A3B", "#688896", "#7C8FAA", "#3F5468"], //lake superior
		["#F8FCFD", "#A2B2CC", "#7A8193", "#6D6B51", "#5A583A", "#2C2D24", "#7D92AE", "#615F62", "#5C6C6C"], //lake superior
		["#485654", "#3D4949", "#7B8F9D", "#8695A3", "#8C99A1", "#82959C", "#839298", "#768387", "#738187", "#637074", "#738891", "#566871", "#BCCCD0", "#8698AA", "#515E65", "#35404E", "#566367"], //lake superior
		//water
		["#C5E0FB", "#F3FBFD", "#52615E", "#18191B", "#90969A", "#27292E", "#A7C2E0", "#6B838D", "#7E9889", "#1B1E3E", "#110F24"], //waterfall
		["#7086A6", "#6E7C78", "#7895BF", "#424639", "#4A6B99", "#7389A3", "#4B607F", "#4F688A", "#263040", "#283247", "#3D536F", "#222126", "#948F84"], //lake (blue)
		["#969599", "#796C6C", "#675855", "#635049", "#79685C", "#6E5340", "#515054", "#6A5848", "#968F8A", "#4B4A4F", "#595453"], //lake bottom browns
		["#757260", "#616664", "#626562", "#E0E9F5", "#BFCEDF", "#A7ADB6", "#636A6C", "#5D5543", "#49402C", "#849BB4", "#5B422D", "#393E41", "#424544"], //pond
		["#BFB9A8", "#C3B481", "#6D604B", "#8E7A6E", "#8097AE", "#3B2F30", "#7F97AE"], //lake sand
		["#C3D3E1", "#A5B3BF", "#E5D1B7", "#E7D093", "#8C6F54", "#8CA0B1"], //lake sand
		["#696566", "#706E6F", "#79796E", "#AFB199", "#898A7C", "#676357", "#C8CAC9", "#41382C"], //moss
		["#E8DFD7", "#DDD6D0", "#8C8780", "#51504A", "#A9A69F", "#D2CCC4", "#444440", "#66685F", "#393B34", "#20211A", "#67665F"], //woods winter snow

		["#AAAAAC", "#7C7C7C", "#747371", "#525251", "#797372", "#343632", "#0C0E0B", "#42433E", "#434544", "#6C6D68"], //winter
		["#494B4A", "#494B4A", "#534B41", "#373934", "#8C887F", "#504531", "#201F19", "#5F5E5D", "#604F3D", "#5A5A57", "#30322C", "#211D15", "#696964", "#1F231B", "#393B36", "#554A47"], //winter
		["#525762", "#4A525F", "#5D6471", "#929DAE", "#AAB5CC", "#A5B0C3", "#353943", "#545F72"], //slate winter sky
		["#A8B0C3", "#9599A7", "#242222", "#292724", "#49484B", "#ADAEB3", "#2B2328", "#3F3F4F"], //canada winter
		["#414141", "#2B2B2A", "#615146", "#634D3B", "#947049", "#525B68", "#EDE8DB", "#2B261B", "#515262"], //outdoors fall
		// ["#C3C6CF", "#5775B0", "#837C7D", "#7A535B", "#593B3B", "#413B3F"], //boots jeans rock (nice blues browns)
		["#0D0F0E", "#767577", "#9AA6B4", "#A2AFB6", "#656863", "#3C3E3C", "#5F5B50", "#38301B", "#636E76", "#82949F", "#4C5A5C", "#302D26", "#A39E8E"], //outdoors fall (nice blues browns)
		
		// //birdland
		// ["#163341", "#172F47", "#4477A8", "#2A4A69", "#52779B", "#000000", "#384B60", "#1F3350", "#153A69", "#153559", "#9D9990", "#9D9990", "#181E21", "#0C1D32", "#706959", "#D6D3CE", "#534E48", "#3E5766", "#222E34", "#BBB4A4", "#7C7D7F"], //birdland

	];
	z.streams["color"] = ( dt => {
		let date0 = new Date();
		let t0 = Math.floor(date0.getTime()/1000);
		let state0 = { 
			dt: dt, count: 0,
			choices: playlist[ Math.floor(t0/dt)%playlist.length ]
		};
		return z.streams["clock"].filter( e => e.t%dt===0 )
			.scan( (state, e) => { 
				state.choices = playlist[ Math.floor(e.t/dt)%playlist.length ];
				// state.choices = playlist[ Math.floor(state.count)%playlist.length ];
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( 38 );
	
	z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"], z.streams["color"]], (clock, dimensions, color) => { return {clock:clock, dimensions:dimensions, color:color} })
		.scan( (state, e) => { 
			state.clock = e.clock;
			state.dimensions = e.dimensions;
			state.color = e.color;
			state.count = state.count + 1;
			z.tools.logmsg("color.choices = " + e.color.choices);
			return state;
	}, {clock:{t:0}, dt:1}  );

	//box
	( dt => {
		const element = document.createElementNS("http://www.w3.org/2000/svg", "rect");
		element.setAttributeNS(null, "id", "box");
		element.setAttributeNS(null, "class", "shape square");
		z.elements["svg"].el.appendChild(element);
			
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			try {
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				Velocity({	
					elements: element, 
					properties: { fillOpacity: 1.0, strokeOpacity: 0.0, fill: color, width: e.dimensions.width, height: e.dimensions.height },
					options: { duration: 2000,  delay: 0, easing: "easeInOutQuad" },
				});
			} catch(err) { z.tools.logerror("box animation ::: " + err ) }
		})
	})(5);


	//main
	( dt => {
		const element = document.querySelector("main");
		const bgcolors = ["rgba(25, 25, 24, 0.4)", "rgba(25, 25, 24, 0.6)", "rgba(25, 25, 24, 0.9)", "rgba(252, 251, 227, 0.5)", "rgba(252, 251, 227, 0.9)", , "rgba(252, 251, 227, 0.6)"]
			
		// const warmblacktints = ["#191918", "#2f2f2f", "#464646", "#5e5e5d", "#757574", "#8c8c8b", "#a3a3a2", "#babab9", "#d1d1d0", "#e8e8e7", "#ffffff", "#fcfbe3", "#e2e1cc", "#c9c8b5", "#b0af9e", "#979688", "#7e7d71", "#64645a", "#4b4b44", "#32322d", "#191916", "#000000"];
		const warmblacktints = ["#191918", "#fcfbe3", "#000000"];

		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			try {
				let count = e.clock.t/dt;
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				Velocity({	
					elements: element, 
					properties: { backgroundColor:  color, backgroundColorAlpha: z.tools.randominteger(0.1,5)/10},
					options: { duration: 1200,  delay: 0, easing: "easeInOutQuad" },
				});

			} catch(err) { z.tools.logerror("main animation ::: " + err ) }
		})
	})(9);

	//circle 1
	( dt => {
		const nelements=[[...Array(8).keys()],[...Array(16).keys()]][v];
		const elements = nelements.reduce( (acc, id) => {
			z.tools.logmsg("create line element ::: " + id);
			let el = document.createElementNS("http://www.w3.org/2000/svg", "circle");
			el.setAttributeNS(null, "id", "circle_"+ id);
			el.setAttributeNS(null, "class", "shape circle");
			z.elements["svg"].el.appendChild(el);
			acc[id] = { el: el };
		return acc;
		}, []);
		const n = elements.length;
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let timing = timings[z.tools.randominteger(0,timings.length)];
					let duration = dt*timing[0]*n, delay = z.tools.randominteger(0, dt*timing[1]*n);
					let element = elements[count%n];
					let cy = Math.floor(e.dimensions.height/2);
					let cx = z.tools.randominteger(0, e.dimensions.width);
					let radius = z.tools.randominteger(e.dimensions.min/10, e.dimensions.max/2);
					// z.tools.logmsg("circle 1 cx= "+cx+" cy= " + cy + " radius = " + radius);
					let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
					Velocity({	
						elements: element.el,
						properties: { fillOpacity: 1.0, strokeOpacity: 0.0, stroke: color, fill: color, cx: cx, cy: cy, r: radius },
						options: { duration: duration,  delay: delay },
					});
				} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
			},
			
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[Math.floor(e.clock.t/(dt*elements.length))%drawings.length](e);
		})
	})(1);

	//lines 1
	( dt => {
		const nelements=[[...Array(16).keys()],[...Array(32).keys()]][v];
		const elements = nelements.reduce( (acc, id) => {
			z.tools.logmsg("create line element ::: " + id);
			let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
			el.setAttributeNS(null, "id", "line1_"+ id);
			el.setAttributeNS(null, "class", "shape line");
			z.elements["svg"].el.appendChild(el);
			acc[id] = { el: el };
		return acc;
		}, []);
		const n = elements.length;
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let timing = timings[z.tools.randominteger(0,timings.length)];
					let duration = dt*timing[0]*n, delay = z.tools.randominteger(0, dt*timing[1]*n);
					let element = elements[count%elements.length];
					// elements.forEach( (element, j) => {
						// let cy = z.tools.randominteger(e.dimensions.height/2,e.dimensions.height);
						let ystart = count%2===0 ? e.dimensions.height*2 : -1.0*e.dimensions.height;
						let yend = count%2===1 ? e.dimensions.height*2 : -1.0*e.dimensions.height;
						let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
						element.el.setAttribute("stroke", color);
						element.el.setAttribute("x1", 0); element.el.setAttribute("x2", e.dimensions.width);
						element.el.setAttribute("y1", ystart); element.el.setAttribute("y2", ystart);
						element.el.setAttribute("strokeOpacity", z.tools.randominteger(0.1,8)/10);
						Velocity({	
							elements: element.el,
							properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(12,e.dimensions.min/2), y1: yend, y2: yend },
							options: { duration: duration,  delay: delay },
						});
					// })
				} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
			},
			
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[Math.floor(e.clock.t/(dt*elements.length))%drawings.length](e);
		})
	})(1);


};
//controls
( () => { 
	const hidetextlink = document.querySelector("#hidetextlink");
	let texthidden = false;
	Kefir.fromEvents(hidetextlink, "click").onValue( e => {
		if(texthidden) {
			z.elements["main"].el.style["opacity"] = 1.0;
			hidetextlink.innerText = "-";
			hidetextlink.title = "hide text";
			texthidden = false;
		}
		else {
			z.elements["main"].el.style["opacity"] = 0.0;
			hidetextlink.innerText = "+";
			hidetextlink.title = "show text";
			texthidden = true;
		}
	});
})();
window.addEventListener('load', e => {
  z.draw(z);
  window.scroll(0,0);
  // window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 1800);
});
window.addEventListener('beforeunload', e => {
	window.scroll(0,0);
});
</script>
</html>
