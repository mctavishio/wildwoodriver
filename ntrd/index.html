<!DOCTYPE html>
<html lang="en">
<head>
	<title>Night Train Red Dust</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
	<meta name="description" content="These poems are about the Iron Range in Minnesota, the Vermilion Trail, and they are stories of travel and derailment about mining, radical politics, unionizing, accordion music and strong women. The book brings together history, geology and the community of people with iron in their veins."/>
	<meta name="author" content="Sheila Packa">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "WebPage",
			"name": "Night Train Red Dust",
			"breadcrumb": "core text",
          	"url": "https://wildwoodriver.com/ntrd/index.html",
			"description": "These poems are about the Iron Range in Minnesota, the Vermilion Trail, and they are stories of travel and derailment about mining, radical politics, unionizing, accordion music and strong women. The book brings together history, geology and the community of people with iron in their veins.",
			"datePublished": "Tue May 24 2022",
          	"image": "/apple-touch-icon.png",
			"author": "https://sheilapacka.com/index.html",
			"license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
		}
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-3PZ9ZMVYEG"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-3PZ9ZMVYEG');
	</script>
	<link rel="stylesheet" href="/css/wr.css"/>
	<style>
		details > summary {
			padding: 4px;
  			cursor: pointer;
		}
		a {
			text-decoration: none;
		}
		.gallery {
			min-width: 95%;
			display: flex;
			flex-wrap: wrap;
			flex-direction: row;
			justify-content: flex-start;
			justify-content: center;
			align-items: baseline; /* flex-start */
			align-content: space-around;
		}
		.gallery > img {
			max-width: 400px;
			min-width: 300px;
			max-width: 44%;
			padding: 10px;
		}

		main, div#contentframe {
			min-width: 90%;
			max-width: 900;
		}
	</style>
</head>
<body id="top" >
<div id="subtextframe" class="frame zlowest"></div>
<div id="svgframe" class="frame zlow"><svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame"></svg></div>
<div id="wordframe" class="frame z0"></div>
<!-- <div id="controlframe" class="frame zhighest"></div> -->
<div id="contentframe" class="absolute zhighest">
<div id="mainflex">
<main id="main" class="expand" data-state="expanded">	

<header>
	<h1>Night Train Red Dust: Poems of the Iron Range</h1>
	<h2>Sheila Packa</h2>
</header>
	<p><a href="#summary">book description</a></p>
	<p><a href="https://store.wildwoodriver.com/product/night-train-red-dust-poems-of-the-iron-range/26">buy book</a></p>
	<p><a href="indexnighttrainweb.html">read online (html version)</a></p>
	<p><a href="#projects">related media projects</a></p>
	<p><a href="#thanks">thanks / funding</a></p>
	<p><a href="/index.html">wildwood river home</a></p>
	<p><a href="#" id="soundlink" class="corelink">turn on sound</a> <span class="typewriter small" title="telegraph" id="telegraph"></span></p>
<article id="summary">
	<header>
		<h1>book description</h1>
	</header>
	<div class="book">
	<figure>
		<img  align="right"  width="400px" src="/data/nightTrainRedDust_cov_small.png"/>
		<figcaption>
			train tracks
		</figcaption>
	</figure>
	<p>
	These poems are about the Iron Range in Minnesota, the Vermilion Trail, and they are stories of travel and derailment about mining, radical politics, unionizing, accordion music and strong women. The book brings together history, geology and the community of people with iron in their veins.
	</p><hr/><p>
	"I excavate these words from a vein of iron...” these poems are “test drills and core samples” — a weave of memory, archive, dream, song, story — drawn from the history and people of the Iron Range of northeastern Minnesota. These pages sound the whistles and roar of the mines, the dust in the lungs, the dangerous crossings into a new language, the accordion’s breath. Culled from violence and tenderness, bone and ash, ore and light, they map a place, a time, a journey through love"<br/> --Pamela Mittlefehldt, PhD and co-editor The Heart of All That Is: Reflections on Home Holy Cow! Press
	</p><hr/><p>
	"Sheila Packa’s poetry is at once deeply personal and widely universal in its evocative exploration of fundamental human experience. Using the red ore dust with which she was raised, she paints vivid images of birth and death, work and struggle, hope and despair. Packa captures the unrest of immigrants leaving their homes in Finland and the unrest of the bitter labor union conflicts of the early days of twentieth century on the Iron Range of northeastern Minnesota. At the same as she chronicles events from the broad sweep of history as the country extracted iron ore from the ground and labor from the immigrants, she shares tender stories from daily life, using the micro-lens of her personal experience.
	</p><p>
Especially arresting is the way Packa weaves into her book material from historical sources, including newspaper accounts of the union organizing efforts of Elizabeth Gurley Flynn and reports on the gritty work of physicians who tended to the medical needs of the miners and their families in the early days. Women —whether in the mines or on hardscrabble farms — are equal players in Packa’s Iron Range, a refreshing treatment of a region often seen as differentially the province of the male. From the story of men and women fighting for their survival and dignity in the days of industrialization to the image of a fragile grouse in the gunsights of a hunter contemplating its mortality, Packa captures the beauty and the contradictions of the place and times that have made the Iron Range iconic in history".
<br/>--Leah Rogne, PhD, Professor, Minnesota State University, Mankato
</p>
<hr/>
<p>Other reviews / information available on <a href="https://sheilapacka.blogspot.com/search?q=night+train">Sheila's blog</a></p>
<hr/>
<p>
Wildwood River Press, 2014<br/>
ISBN 978-0-9843777-7-0<br/>
Available in bookstores.<br/>
Distributor: Ingram<br/>
$15
</p>
		<hr/>	
	</div>
</article>
<article id="projects">
	<header>
		<h1>media projects</h1>
	</header>
	<h5>my geology</h5>
	<p><i>composer & media artist: Kathy McTavish</i></p>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/101956156?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>origin of red</h5>
	<p><i>packa & mctavish</i></p>
	<div class="vimeowrapper16x9" >
		<iframe title="vimeo-player" src="https://player.vimeo.com/video/61797960" width="640" height="360" frameborder="0" allowfullscreen></iframe>
	</div>
	<hr/>
	<h5>bonfire of roses</h5>
	<p><i>packa & mctavish</i></p>
	<div class="vimeowrapper16x9">
		<iframe src="https://player.vimeo.com/video/70518060?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<p>
	Sheila Packa, text;<br/>
	Kathy McTavish, sound & image mix;<br/>
	Sound samples provided by Zeitgeist New Music Quartet<br/>
	</p>
	<hr/>
	<h5>vestiges (2 min work sample)</h5>
	<p><i>packa & mctavish</i></p>
	<p>see more at: <a href="https://mctavish.io/millcity/index.html">documentation website</a></p>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/101892708?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<p>
	Web film.
This is a screen recording of an interactive, web film: the text is from Night Train Red Dust, images, video and sound mixed in an ever-shifting kaleidoscope and an example of live text input (could also be done via mobile device)
	</p>
</article>
<hr/>
<article id="thanks">
	<header>
		<h1>thanks</h1>
	</header>
	<div>
		<p>
		Thank you to the community of writers and artists in the Northeast Minnesota region, especially Pamela Mittlefehldt and Gary Boelhower. Thank you to Kathy McTavish for music, art, passion, and inspiration. This project was made possible through a fiscal year 2012–2013 McKnight/ACHF/ARAC Individual Artist Fellowship Grant from the Arrowhead Regional Arts Council (www.aracouncil. org) which is funded in part with money from the Minnesota Arts and Cultural Heritage Fund as appropriated by the Minnesota State Legislature with money from the vote of the people of Minnesota on November 4, 2008 and the McKnight Foundation. This book is dedicated to my paternal grandparents Jacob Packa and Helen Konsteri Packa and my maternal grandparents, Nellie Mariana Palo Kamunen and Nikolai Oskar Kamunen. Cover design by Kathy McTavish and Sheila Packa Author Photograph by Magic Box Photography, Duluth, MN 55805.
		</p>
	</div>
</article>
<audio loop=true id="audio1">
<source src="https://storage.googleapis.com/www.blueboatfilms.com/sound/roadbirdcanyon.mp3" type="audio/mpeg">
</audio>
</main>
</div>
</div>
<div id="hidetext"><a id="hidetextlink" href="#" title="hide text">-</a></div>

</body>
<script src="../code/velocity.min.js"></script>
<script src="../code/kefir201911.min.js"></script>
<!-- <script src="code/atlasabsence.js"></script> -->

<script>
let width = window.innerWidth, height = window.innerHeight;
let min = Math.min(width, height), max = Math.max(width, height);
let version = (min < 680 || max < 980) ? "small" : "large";
let v = version === "small" ? 0 : 1;
let z = {};
z.tools = {
	randominteger: (min, max) => {
		return Math.floor( min + Math.random()*(max-min));
	},
	logmsg: function(msg) {
		try { 
			console.log("### ::: " + msg); 
		}
		catch(err) { z.tools.logerror(err) }
	},
	logerror: function(error) {
		try { console.log("rusty error ... " + error); }
		catch(err) {}
	},
	randomhighharmonic: () => {
		let multipliers = [10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomlowharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ]/2;
	},
	randomkey: (object) => {
		let keys = Object.keys(object);
		let key = keys[z.tools.randominteger(0,keys.length)];
		// z.tools.logmsg("key = " + key);
		return key;
	},
	datestr: (date, options) => {
		if(options===undefined) options = {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"};
		return date.toLocaleTimeString("en-US", options);
		//new Date().toLocaleTimeString("en-US", {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"});
	},
	togrid: (min=1, max=1, x=1, ndivisions=1) => {
		let dx = Math.floor( (max-min) / ndivisions );
		return Math.floor( ( x-min+dx/2)/dx )*dx + min;
	},
};
//core elements
z.elements = ( () => {
	return {
		body: { el: document.querySelector("body") },
		main: { el: document.querySelector("main") },
		// clock: { el: document.querySelector("#clock") },
		// telegraph: { el: document.querySelector("#telegraph") },
		svg:  { el: document.querySelector("#svg") },
		frames: ["subtextframe", "svgframe", "wordframe", "contentframe"].reduce( (acc, id) => {
			z.tools.logmsg("create frame element ::: " + id);
			acc[id] = { el: document.querySelector("#"+id) };
			return acc;
		}, {}),
	}
})()
	
z.streams = {
	clock: ( () => {
	let dt = 1;
	let date0 = new Date();
	let t0 = Math.floor(date0.getTime()/1000);
	let state0 = { dt: dt, count: 0, date: date0, t: t0, t0: t0 };
	return Kefir.withInterval( dt*1000, emitter => { emitter.emit( { date: new Date() } ) })
			.scan( (state, e) => { 
				state.date = e.date;
				state.t = Math.floor(e.date.getTime()/1000);
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( ),
	dimensions: ( () => {
		let dt = .4;
		const ngrids=[2,2], npasts=[0,0];
		let state0 = { dt: dt, count: 0,
			grid: { nrows: ngrids[v], ncols: ngrids[v], dx: Math.floor(width/ngrids[v]), dy: Math.floor(height/ngrids[v]), sw: 12, pastn: npasts[v] },
			width: width, height: height, 
			max: max, min: min, 
		};
		return Kefir.fromEvents(window, "resize").throttle(dt*1000)
			.scan( (state,e) => {
				state.width = window.innerWidth;
				state.height = window.innerHeight;
				state.max = Math.max(state.width, state.height);
				state.min = Math.min(state.width, state.height);
				state.grid.dx = Math.floor(state.width/state.grid.ncols);
				state.grid.dy = Math.floor(state.height/state.grid.nrows);
				state.grid.sw = Math.floor(Math.max(state.grid.dx*.03, state.grid.dy*.03, 4));
				return state
			}, state0) 
	})( ),
};

z.draw = z => {
	let ntimings = 32;
	let dtiming = Math.floor(400/ntimings);
	const timings = [...Array(ntimings).keys()].reduce( (acc, j) => {
		let duration = 500+(j*dtiming);
		acc[j] = [duration, 900-duration];
	return acc;
	}, []);

	//controls
	( () => { 
		const soundlink = document.querySelector("#soundlink");
		const telegraph = document.querySelector("#telegraph");
		const audio1 = document.querySelector("#audio1");
		const baseurl = "https://storage.googleapis.com/www.blueboatfilms.com/sound/";
		const tracks = [
			{title: "road 1", url: "road1a_long.mp3", duration: 199}, //3:19
			{title: "road bird canyon", url: "roadbirdcanyon.mp3", duration:190}, //3:10
		];
		let soundplaying = false;
		Kefir.fromEvents(soundlink, "click").onValue( e => {
			z.tools.logmsg("play sound !");
			if(!soundplaying) { 
				try {
					let track = tracks[z.tools.randominteger(0,tracks.length)];
					audio1.src = baseurl + track.url;
					// let starttime = z.tools.randominteger(0,track.duration);
					let starttime = 0;
					audio1.currentTime = starttime;
					audio1.play();
					z.tools.logmsg("playback resumed");
					telegraph.innerHTML =  "<i>(currently playing ::: " + track.title + ")</i>";
					soundplaying = true;
					soundlink.innerText = "turn off sound/new track ";
					soundlink.classList.add("active");
				} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) } 
			}
			else { 
				try {
					document.querySelector("#audio1").pause();
					telegraph.innerHTML =  "";
					soundplaying = false;
					soundlink.innerText = "turn on sound";
					soundlink.classList.remove("active");
				} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
			}
		});
	})();
	const playlist = [
		["#fcfbe3", "#191918"], //"warmbw",
		//cello
		["#1A0A03", "#2D0E08", "#6B2E12", "#613716", "#9E6528", "#5F370C", "#9A1905", "#FFF9C9"], //cello at sacred heart
		["#0E0600", "#2E0F04", "#0F0700", "#484E42", "#577871", "#010101", "#FFFFFF", "#406861", "#902200"], //cello at sacred heart
		["#78685B", "#B4A19A", "#877C6A", "#2F3C35", "#435046", "#242216", "#6B867D", "#993B21", "#000100", "#725128", "#15211D"], //cello at sacred heart
		["#6B6259", "#43403B", "#51524D", "#8A300F", "#743B1D", "#988071", "#2D2F2E", "#B9AA8D", "#64655E"], //cello stairwell*
		["#3D1C04", "#0D0604", "#411B0D", "#6D3F26", "#8E7061", "#8E9490"], //cellosacredheart
	];
	z.streams["color"] = ( dt => {
		let date0 = new Date();
		let t0 = Math.floor(date0.getTime()/1000);
		let state0 = { 
			dt: dt, count: 0,
			choices: playlist[ Math.floor(t0/dt)%playlist.length ]
		};
		return z.streams["clock"].filter( e => e.t%dt===0 )
			.scan( (state, e) => { 
				state.choices = playlist[ Math.floor(e.t/dt)%playlist.length ];
				// state.choices = playlist[ Math.floor(state.count)%playlist.length ];
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( 38 );
	
	z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"], z.streams["color"]], (clock, dimensions, color) => { return {clock:clock, dimensions:dimensions, color:color} })
		.scan( (state, e) => { 
			state.clock = e.clock;
			state.dimensions = e.dimensions;
			state.color = e.color;
			state.count = state.count + 1;
			z.tools.logmsg("color.choices = " + e.color.choices);
			return state;
	}, {clock:{t:0}, dt:1}  );

	//box
	( dt => {
		const element = document.createElementNS("http://www.w3.org/2000/svg", "rect");
		element.setAttributeNS(null, "id", "box");
		element.setAttributeNS(null, "class", "shape square");
		z.elements["svg"].el.appendChild(element);
			
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			try {
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				Velocity({	
					elements: element, 
					properties: { fillOpacity: 1.0, strokeOpacity: 0.0, fill: color, width: e.dimensions.width, height: e.dimensions.height },
					options: { duration: 2000,  delay: 0, easing: "easeInOutQuad" },
				});
			} catch(err) { z.tools.logerror("box animation ::: " + err ) }
		})
	})(5);

	//main
	( dt => {
		const element = document.querySelector("main");
		const bgcolors = ["rgba(25, 25, 24, 0.4)", "rgba(25, 25, 24, 0.6)", "rgba(25, 25, 24, 0.9)", "rgba(252, 251, 227, 0.4)", "rgba(252, 251, 227, 0.9)", , "rgba(252, 251, 227, 0.6)"]
			
		// const warmblacktints = ["#191918", "#2f2f2f", "#464646", "#5e5e5d", "#757574", "#8c8c8b", "#a3a3a2", "#babab9", "#d1d1d0", "#e8e8e7", "#ffffff", "#fcfbe3", "#e2e1cc", "#c9c8b5", "#b0af9e", "#979688", "#7e7d71", "#64645a", "#4b4b44", "#32322d", "#191916", "#000000"];
		const warmblacktints = ["#191918", "#fcfbe3", "#000000"];


		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			try {
				let count = e.clock.t/dt;
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				z.tools.logmsg("in BOX " + color + " color =  " + color);
				Velocity({	
					elements: element, 
					properties: { backgroundColor:  color, backgroundColorAlpha: z.tools.randominteger(0.1,6)/10},
					options: { duration: 1200,  delay: 0, easing: "easeInOutQuad" },
				});
			} catch(err) { z.tools.logerror("box animation ::: " + err ) }
		})
	})(9);

//circle 1
( dt => {
	const nelements=[[...Array(4).keys()],[...Array(8).keys()]][v];
	const elements = nelements.reduce( (acc, id) => {
		z.tools.logmsg("create line element ::: " + id);
		let el = document.createElementNS("http://www.w3.org/2000/svg", "circle");
		el.setAttributeNS(null, "id", "circle_"+ id);
		el.setAttributeNS(null, "class", "shape circle");
		z.elements["svg"].el.appendChild(el);
		acc[id] = { el: el };
	return acc;
	}, []);
	const n = elements.length;
	const drawings = [
		e => {
			try {
				let count = e.clock.t/dt;
				let timing = timings[z.tools.randominteger(0,timings.length)];
				let duration = dt*timing[0]*n, delay = z.tools.randominteger(0, dt*timing[1]*n);
				let element = elements[count%n];
				let cy = Math.floor(e.dimensions.height/2);
				let cx = Math.floor(e.dimensions.width/2);
				let radius = z.tools.randominteger(e.dimensions.min/10, e.dimensions.min);
				// z.tools.logmsg("circle 1 cx= "+cx+" cy= " + cy + " radius = " + radius);
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				Velocity({	
					elements: element.el,
					properties: { fillOpacity: count%5===0 ? 1.0 : 1.0, strokeOpacity: count%5===1 ? 0.0 : 0.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.min/2, e.dimensions.min/6), strokeDasharray: z.tools.randominteger(8, e.dimensions.min), fill: color, cx: cx, cy: cy, r: radius },
					options: { duration: duration,  delay: delay },
				});
			} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
		},
		
	];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		drawings[Math.floor(e.clock.t/(dt*elements.length))%drawings.length](e);
	})
})(1);

const p = [
	e => {
		let cy = z.tools.randominteger(0,e.dimensions.height);
		return {
			xend: [-2.0*e.dimensions.width, z.tools.randominteger(-1.0*e.dimensions.width/4, -1.0*e.dimensions.width/2)],
			xstart: [z.tools.randominteger(e.dimensions.width*1.2, e.dimensions.width*1.4), 2*e.dimensions.width],
			ystart: [cy,cy], yend: [cy,cy]
		}
	},
	e => {
		let cx = z.tools.randominteger(0,e.dimensions.width);
		return {
			yend: [-2.0*e.dimensions.height, z.tools.randominteger(-1.0*e.dimensions.height/4, -1.0*e.dimensions.height/2)],
			ystart: [z.tools.randominteger(e.dimensions.height*1.2, e.dimensions.height*1.4), 2*e.dimensions.height],
			xstart: [cx,cx], xend: [cx,cx]
		}
	},
	e => {
		let cy = z.tools.randominteger(0,e.dimensions.height);
		return {
			xstart: [-2.0*e.dimensions.width, z.tools.randominteger(-1.0*e.dimensions.width/4, -1.0*e.dimensions.width/2)],
			xend: [z.tools.randominteger(e.dimensions.width*1.2, e.dimensions.width*1.4), 2*e.dimensions.width],
			ystart: [cy,cy], yend: [cy,cy]
		}
	},
	e => {
		let cx = z.tools.randominteger(0,e.dimensions.width);
		return {
			ystart: [-2.0*e.dimensions.height, z.tools.randominteger(-1.0*e.dimensions.height/4, -1.0*e.dimensions.height/2)],
			yend: [z.tools.randominteger(e.dimensions.height*1.2, e.dimensions.height*1.4), 2*e.dimensions.height],
			xstart: [cx,cx], xend: [cx,cx]
		}
	}
];
	//line 1
	( dt => {
	const nelements=[[...Array(4).keys()],[...Array(8).keys()]][v];
	const elements = nelements.reduce( (acc, id) => {
		z.tools.logmsg("create line element ::: " + id);
		let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
		el.setAttributeNS(null, "id", "line1_"+ id);
		el.setAttributeNS(null, "class", "shape line");
		z.elements["svg"].el.appendChild(el);
		acc[id] = { el: el };
	return acc;
	}, []);
	const n = elements.length;
	const drawings = [
		e => {
			try {
				let count = e.clock.t/dt;
				let params = p[z.tools.randominteger(0,p.length)](e);
				let timing = timings[z.tools.randominteger(0,timings.length)];
				let duration = dt*timing[0]*n, delay = z.tools.randominteger(0, dt*timing[1]*n);
				let element = elements[count%elements.length];
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				element.el.setAttribute("stroke", color);
				element.el.setAttribute("x1", params.xstart[0]); element.el.setAttribute("x2", params.xstart[1]);
				element.el.setAttribute("y1", params.ystart[0]); element.el.setAttribute("y2", params.ystart[1]);
				element.el.setAttribute("strokeOpacity", z.tools.randominteger(0.1,8)/10);
				Velocity({	
					elements: element.el,
					properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.min/2,e.dimensions.max), strokeDasharray: z.tools.randominteger(8, e.dimensions.min), x1: params.xend[0], x2: params.xend[1], y1: params.yend[0], y2: params.yend[1] },
					options: { duration: duration,  delay: delay },
				});
			} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
		},
	];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		drawings[Math.floor(e.clock.t/(dt*elements.length*2))%drawings.length](e);
	})
})(2);

//line 2
	( dt => {
	const nelements=[[...Array(4).keys()],[...Array(8).keys()]][v];
	const elements = nelements.reduce( (acc, id) => {
		z.tools.logmsg("create line element ::: " + id);
		let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
		el.setAttributeNS(null, "id", "line2_"+ id);
		el.setAttributeNS(null, "class", "shape line");
		z.elements["svg"].el.appendChild(el);
		acc[id] = { el: el };
	return acc;
	}, []);
	const n = elements.length;
	const drawings = [
		e => {
			try {
				let count = e.clock.t/dt;
				let params = p[z.tools.randominteger(0,p.length)](e);
				let timing = timings[z.tools.randominteger(0,timings.length)];
				let duration = dt*timing[0]*n, delay = z.tools.randominteger(0, dt*timing[1]*n);
				let element = elements[count%elements.length];
				let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
				element.el.setAttribute("stroke", color);
				element.el.setAttribute("x1", params.xstart[1]); element.el.setAttribute("x2", params.xstart[0]);
				element.el.setAttribute("y1", params.ystart[1]); element.el.setAttribute("y2", params.ystart[0]);
				element.el.setAttribute("strokeOpacity", z.tools.randominteger(0.1,8)/10);
				Velocity({	
					elements: element.el,
					properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.min/2,e.dimensions.max), strokeDasharray: z.tools.randominteger(8, e.dimensions.min), x1: params.xend[1], x2: params.xend[0], y1: params.yend[1], y2: params.yend[0] },
					options: { duration: duration,  delay: delay },
				});
			} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
		},
	];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		drawings[Math.floor(e.clock.t/(dt*elements.length*2))%drawings.length](e);
	})
})(3);


};
//controls
( () => { 
	const hidetextlink = document.querySelector("#hidetextlink");
	let texthidden = false;
	Kefir.fromEvents(hidetextlink, "click").onValue( e => {
		if(texthidden) {
			z.elements["main"].el.style["opacity"] = 1.0;
			hidetextlink.innerText = "-";
			hidetextlink.title = "hide text";
			texthidden = false;
		}
		else {
			z.elements["main"].el.style["opacity"] = 0.0;
			hidetextlink.innerText = "+";
			hidetextlink.title = "show text";
			texthidden = true;
		}
	});
})();
window.addEventListener('load', e => {
  z.draw(z);
  window.scroll(0,0);
  // window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 800);
});
window.addEventListener('beforeunload', e => {
	window.scroll(0,0);
});
</script>
</html>
